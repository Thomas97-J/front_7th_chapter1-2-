테스트 설계를 시작하겠습니다. 날짜 범위 검증 함수의 명세를 분석하여 체계적인 테스트 케이스를 설계하겠습니다.

## 테스트 스위트: 날짜 범위 검증 함수 (validateDateRange)

### 1. 기본 동작 테스트 (Basic Functionality)

#### 테스트 케이스 1.1
- **이름**: should return valid when start date is before end date
- **타입**: unit
- **우선순위**: high
- **Given**: 시작일이 '2024-01-01'이고 종료일이 '2024-01-31'인 경우
- **When**: validateDateRange 함수를 호출할 때
- **Then**: `{ isValid: true }`를 반환해야 함

#### 테스트 케이스 1.2
- **이름**: should return valid when start date equals end date
- **타입**: unit
- **우선순위**: high
- **Given**: 시작일과 종료일이 모두 '2024-01-01'인 경우
- **When**: validateDateRange 함수를 호출할 때
- **Then**: `{ isValid: true }`를 반환해야 함

#### 테스트 케이스 1.3
- **이름**: should return invalid when start date is after end date
- **타입**: unit
- **우선순위**: high
- **Given**: 시작일이 '2024-01-31'이고 종료일이 '2024-01-01'인 경우
- **When**: validateDateRange 함수를 호출할 때
- **Then**: `{ isValid: false, error: '시작일은 종료일보다 이전이어야 합니다' }`를 반환해야 함

---

### 2. 입력 타입 처리 테스트 (Input Type Handling)

#### 테스트 케이스 2.1
- **이름**: should accept Date objects as input
- **타입**: unit
- **우선순위**: high
- **Given**: Date 객체로 생성된 시작일과 종료일
- **When**: validateDateRange 함수를 호출할 때
- **Then**: 정상적으로 검증하고 `{ isValid: true }`를 반환해야 함

#### 테스트 케이스 2.2
- **이름**: should accept ISO 8601 string format as input
- **타입**: unit
- **우선순위**: high
- **Given**: ISO 8601 문자열 형식('2024-01-01T00:00:00.000Z')의 날짜
- **When**: validateDateRange 함수를 호출할 때
- **Then**: 정상적으로 검증하고 `{ isValid: true }`를 반환해야 함

#### 테스트 케이스 2.3
- **이름**: should accept mixed input types (Date and string)
- **타입**: unit
- **우선순위**: medium
- **Given**: 시작일은 Date 객체, 종료일은 ISO 문자열인 경우
- **When**: validateDateRange 함수를 호출할 때
- **Then**: 정상적으로 검증하고 `{ isValid: true }`를 반환해야 함

---

### 3. 에러 처리 테스트 (Error Handling)

#### 테스트 케이스 3.1
- **이름**: should return error when start date is null
- **타입**: unit
- **우선순위**: high
- **Given**: 시작일이 null이고 종료일이 유효한 날짜인 경우
- **When**: validateDateRange 함수를 호출할 때
- **Then**: `{ isValid: false, error: '시작일이 제공되지 않았습니다' }`를 반환해야 함

#### 테스트 케이스 3.2
- **이름**: should return error when end date is undefined
- **타입**: unit
- **우선순위**: high
- **Given**: 시작일이 유효하고 종료일이 undefined인 경우
- **When**: validateDateRange 함수를 호출할 때
- **Then**: `{ isValid: false, error: '종료일이 제공되지 않았습니다' }`를 반환해야 함

#### 테스트 케이스 3.3
- **이름**: should return error when both dates are null
- **타입**: unit
- **우선순위**: high
- **Given**: 시작일과 종료일 모두 null인 경우
- **When**: validateDateRange 함수를 호출할 때
- **Then**: `{ isValid: false, error: '시작일과 종료일이 제공되지 않았습니다' }`를 반환해야 함

#### 테스트 케이스 3.4
- **이름**: should return error when invalid date string is provided
- **타입**: unit
- **우선순위**: high
- **Given**: 시작일이 'invalid-date' 같은 잘못된 형식인 경우
- **When**: validateDateRange 함수를 호출할 때
- **Then**: `{ isValid: false, error: '잘못된 날짜 형식입니다' }`를 반환해야 함

#### 테스트 케이스 3.5
- **이름**: should return error when date string is in wrong format
- **타입**: unit
- **우선순위**: medium
- **Given**: 날짜가 '01/01/2024' 같은 다른 형식인 경우
- **When**: validateDateRange 함수를 호출할 때
- **Then**: `{ isValid: false, error: '잘못된 날짜 형식입니다' }`를 반환해야 함

#### 테스트 케이스 3.6
- **이름**: should return error when Invalid Date object is provided
- **타입**: unit
- **우선순위**: medium
- **Given**: new Date('invalid')로 생성된 Invalid Date 객체
- **When**: validateDateRange 함수를 호출할 때
- **Then**: `{ isValid: false, error: '잘못된 날짜 형식입니다' }`를 반환해야 함

---

### 4. 엣지 케이스 테스트 (Edge Cases)

#### 테스트 케이스 4.1
- **이름**: should return valid for same date at different times
- **타입**: edge
- **우선순위**: medium
- **Given**: 같은 날짜의 다른 시간 ('2024-01-01T00:00:00Z', '2024-01-01T23:59:59Z')
- **When**: validateDateRange 함수를 호출할 때
- **Then**: `{ isValid: true }`를 반환해야 함

#### 테스트 케이스 4.2
- **이름**: should return valid for one day difference
- **타입**: edge
- **우선순위**: medium
- **Given**: 시작일이 '2024-01-01'이고 종료일이 '2024-01-02'인 경우
- **When**: validateDateRange 함수를 호출할 때
- **Then**: `{ isValid: true }`를 반환해야 함

#### 테스트 케이스 4.3
- **이름**: should return valid with warning for more than 100 years difference
- **타입**: edge
- **우선순위**: high
- **Given**: 시작일이 '1900-01-01'이고 종료일이 '2024-01-01'인 경우 (124년 차이)
- **When**: validateDateRange 함수를 호출할 때
- **Then**: `{ isValid: true, warning: '날짜 범위가 100년을 초과합니다' }`를 반환해야 함

#### 테스트 케이스 4.4
- **이름**: should return valid for exactly 100 years difference
- **타입**: edge
- **우선순위**: medium
- **Given**: 시작일이 '1924-01-01'이고 종료일이 '2024-01-01'인 경우 (정확히 100년)
- **When**: validateDateRange 함수를 호출할 때
- **Then**: `{ isValid: true }`를 반환해야 함 (경고 없음)

#### 테스트 케이스 4.5
- **이름**: should handle leap year dates correctly
- **타입**: edge
- **우선순위**: medium
- **Given**: 윤년의 2월 29일 ('2024-02-29')을 포함하는 날짜 범위
- **When**: validateDateRange 함수를 호출할 때
- **Then**: `{ isValid: true }`를 반환하고 정상적으로 처리해야 함

#### 테스트 케이스 4.6
- **이름**: should return error for non-existent leap year date
- **타입**: edge
- **우선순위**: medium
- **Given**: 평년의 2월 29일 ('2023-02-29')을 포함하는 경우
- **When**: validateDateRange 함수를 호출할 때
- **Then**: `{ isValid: false, error: '잘못된 날짜 형식입니다' }`를 반환해야 함

#### 테스트 케이스 4.7
- **이름**: should handle timezone differences correctly
- **타입**: edge
- **우선순위**: low
- **Given**: 다른 타임존의 날짜 ('2024-01-01T23:00:00+09:00', '2024-01-01T15:00:00+01:00')
- **When**: validateDateRange 함수를 호출할 때
- **Then**: UTC 기준으로 정확히 비교하여 결과를 반환해야 함

#### 테스트 케이스 4.8
- **이름**: should handle very old dates (before 1900)
- **타입**: edge
- **우선순위**: low
- **Given**: 시작일이 '1800-01-01'인 매우 오래된 날짜
- **When**: validateDateRange 함수를 호출할 때
- **Then**: 정상적으로 처리하고 검증 결과를 반환해야 함

#### 테스트 케이스 4.9
- **이름**: should handle future dates far ahead
- **타입**: edge
- **우선순위**: low
- **Given**: 종료일이 '2999-12-31'인 먼 미래 날짜
- **When**: validateDateRange 함수를 호출할 때
- **Then**: 정상적으로 처리하고 검증 결과를 반환해야 함

#### 테스트 케이스 4.10
- **이름**: should handle midnight edge case
- **타입**: edge
- **우선순위**: medium
- **Given**: 시작일이 '2024-01-01T23:59:59.999Z'이고 종료일이 '2024-01-02T00:00:00.000Z'인 경우
- **When**: validateDateRange 함수를 호출할 때
- **Then**: `{ isValid: true }`를 반환해야 함

---

### 5. 통합 테스트 (Integration Tests)

#### 테스트 케이스 5.1
- **이름**: should work correctly in a form validation context
- **타입**: integration
- **우선순위**: medium
- **Given**: React 폼 컴포넌트에서 날짜 입력 필드가 있는 경우
- **When**: 사용자가 날짜를 입력하고 검증을 트리거할 때
- **Then**: 올바른 검증 결과가 UI에 표시되어야 함

#### 테스트 케이스 5.2
- **이름**: should integrate with date picker component
- **타입**: integration
- **우선순위**: medium
- **Given**: 날짜 선택기 컴포넌트와 통합된 경우
- **When**: 사용자가 시작일과 종료일을 선택할 때
- **Then**: 실시간으로 검증 결과가 업데이트되어야 함

#### 테스트 케이스 5.3
- **이름**: should handle async validation scenario
- **타입**: integration
- **우선순위**: low
- **Given**: 비동기적으로 날짜를 로드하는 경우
- **When**: 날짜가 로드된 후 검증을 수행할 때
- **Then**: 정확한 검증 결과를 반환해야 함

---

## 테스트 구현 권장사항

### 테스트 파일 구조
```
src/__tests__/unit/validateDateRange.spec.ts
src/__tests__/integration/dateRangeForm.spec.tsx
```

### Mock 데이터 준비
- 고정된 날짜 사용 (테스트 안정성)
- 다양한 입력 형식의 fixture 생성
- 엣지 케이스용 특수 날짜 집합

### 우선순위별 구현 순서
1. **High 우선순위**: 기본 동작과 필수 에러 처리 (테스트 케이스 1.1-1.3, 2.1-2.2, 3.1-3.4, 4.3)
2. **Medium 우선순위**: 추가 입력 타입과 엣지 케이스 (테스트 케이스 2.3, 3.5-3.6, 4.1-4.2, 4.4-4.6, 5.1-5.2)
3. **Low 우선순위**: 특수 케이스와 통합 테스트 (테스트 케이스 4.7-4.9, 5.3)

### 테스트 커버리지 목표
- Line Coverage: 100%
- Branch Coverage: 100%
- Function Coverage: 100%

이 테스트 설계는 총 **28개의 테스트 케이스**를 포함하며, 기본 동작부터 복잡한 엣지 케이스까지 포괄적으로 커버합니다.

요구사항 명세를 검증하겠습니다. 먼저 현재 명세를 면밀히 분석한 후 개선 사항을 제시하겠습니다.

## 검증 결과

### 명확성
- **평가**: 개선 필요
- **의견**: 
  - ISO 8601 문자열의 구체적 형식이 명시되지 않음 (날짜만? 시간 포함?)
  - "경고 메시지"의 구체적 내용과 반환 방식이 불명확 (어떤 형태로 경고를 제공하는가?)
  - 에러 메시지의 구체적 내용이 명시되지 않음
  - Date 객체가 Invalid Date인 경우의 처리가 불명확

### 완전성
- **평가**: 개선 필요
- **의견**:
  - 타임존 처리 방식이 명시되지 않음 (UTC? 로컬 타임존?)
  - 문자열과 Date 객체를 혼용해서 입력한 경우 처리 방식 미명시
  - 100년 이상 차이일 때의 반환값 구조가 불명확 (경고가 있으면서 isValid는 true?)
  - 빈 문자열 입력 케이스 누락
  - 숫자(타임스탬프) 입력 허용 여부 미명시
  - 미래 날짜 제한 여부 미명시

### 테스트 가능성
- **평가**: 통과
- **의견**:
  - 대부분의 조건이 검증 가능하게 명시됨
  - 구체적인 입력-출력 예시가 있으면 더 명확할 것

### 일관성
- **평가**: 개선 필요
- **의견**:
  - "100년 이상 차이"의 경우 "유효"하면서 "경고"를 제공하는데, 출력 형식(요구사항 3)에 경고를 포함하는 구조가 정의되지 않음
  - 에러 처리(요구사항 4)와 출력 형식(요구사항 3)의 연결이 명확하지 않음

---

## 개선된 명세

# 날짜 범위 검증 함수 명세

## 1. 기능 개요
두 날짜(시작일, 종료일) 사이의 기간이 유효한지 검증하는 순수 함수를 구현합니다.

## 2. 함수 시그니처
```typescript
function validateDateRange(
  startDate: Date | string,
  endDate: Date | string
): ValidationResult

interface ValidationResult {
  isValid: boolean;
  error?: string;
  warning?: string;
}
```

## 3. 입력 명세

### 3.1 허용 타입
- `Date` 객체
- ISO 8601 형식 문자열: `YYYY-MM-DD` 또는 `YYYY-MM-DDTHH:mm:ss.sssZ`

### 3.2 타임존 처리
- Date 객체: 로컬 타임존으로 처리
- ISO 문자열: 
  - 날짜만 있는 경우 (`YYYY-MM-DD`): UTC 00:00:00으로 파싱
  - 시간 포함: 문자열에 명시된 타임존 사용

### 3.3 유효하지 않은 입력
다음 입력은 에러로 처리:
- `null`, `undefined`
- 빈 문자열 (`""`)
- ISO 8601 형식이 아닌 문자열
- Invalid Date 객체
- 숫자, 불린 등 다른 타입

## 4. 출력 명세

### 4.1 유효한 경우
```typescript
{ isValid: true }
```
**조건**: 시작일 <= 종료일

### 4.2 유효하지만 경고가 있는 경우
```typescript
{ 
  isValid: true, 
  warning: "Date range exceeds 100 years. Please verify the dates are correct."
}
```
**조건**: 종료일 - 시작일 > 100년 (36,525일)

### 4.3 무효한 경우
```typescript
{ isValid: false, error: string }
```

**에러 메시지 목록**:
- `"startDate is required"`: startDate가 null 또는 undefined
- `"endDate is required"`: endDate가 null 또는 undefined
- `"startDate must be a Date object or ISO 8601 string"`: 잘못된 타입
- `"endDate must be a Date object or ISO 8601 string"`: 잘못된 타입
- `"Invalid startDate format"`: 파싱 불가능한 날짜
- `"Invalid endDate format"`: 파싱 불가능한 날짜
- `"startDate must be before or equal to endDate"`: 시작일 > 종료일

## 5. 검증 로직

### 5.1 검증 순서
1. 입력 존재 여부 확인 (null/undefined 체크)
2. 입력 타입 확인 (Date | string)
3. 날짜 파싱 및 유효성 확인
4. 날짜 순서 검증 (startDate <= endDate)
5. 경고 조건 확인 (100년 초과)

### 5.2 검증 규칙
- **같은 날짜**: 유효 (`startDate === endDate`)
- **1일 차이**: 유효 (`endDate - startDate === 1일`)
- **100년 이상**: 유효하지만 경고 반환
- **시작일 > 종료일**: 무효

## 6. 엣지 케이스

| 케이스 | 입력 예시 | 기대 출력 |
|--------|----------|----------|
| 같은 날짜 | `"2024-01-01", "2024-01-01"` | `{ isValid: true }` |
| 1일 차이 | `"2024-01-01", "2024-01-02"` | `{ isValid: true }` |
| 100년 정확히 | `"1924-01-01", "2024-01-01"` | `{ isValid: true }` |
| 100년 초과 | `"1900-01-01", "2024-01-01"` | `{ isValid: true, warning: "..." }` |
| 역순 날짜 | `"2024-01-02", "2024-01-01"` | `{ isValid: false, error: "..." }` |
| Invalid Date | `new Date("invalid")` | `{ isValid: false, error: "Invalid startDate format" }` |
| 빈 문자열 | `""` | `{ isValid: false, error: "..." }` |
| 혼합 입력 | `new Date(), "2024-01-01"` | 정상 처리 |
| 윤년 | `"2024-02-29", "2024-03-01"` | `{ isValid: true }` |
| 타임존 차이 | `"2024-01-01T23:00:00Z", "2024-01-02T01:00:00+09:00"` | 정상 처리 (UTC 기준 비교) |

## 7. 비기능 요구사항
- **불변성**: 입력 Date 객체를 변경하지 않음
- **순수 함수**: 동일 입력에 대해 항상 동일 출력
- **타입 안정성**: TypeScript strict 모드 호환
- **성능**: O(1) 시간 복잡도

## 8. 제외 사항
- 미래 날짜 제한 없음 (비즈니스 로직에서 처리)
- 특정 날짜 포맷 변환 기능 없음
- 날짜 범위 계산 기능 없음 (일수, 개월수 등)

---

이 개선된 명세는:
1. **명확성**: 구체적인 타입, 에러 메시지, 엣지 케이스 명시
2. **완전성**: 타임존, 혼합 입력, 빈 문자열 등 모든 시나리오 포함
3. **테스트 가능성**: 입력-출력 예시 테이블 제공
4. **일관성**: 경고 메시지가 포함된 출력 형식 명확히 정의

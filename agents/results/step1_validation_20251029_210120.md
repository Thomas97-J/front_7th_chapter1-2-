제공하신 요구사항 명세를 검토하겠습니다.

## 검증 결과

### 명확성
- **평가: 개선 필요**
- **의견:**
  - ISO 8601 문자열의 정확한 형식이 명시되지 않음 (timezone 포함 여부, 시간 정보 포함 여부 등)
  - "잘못된 날짜 형식"의 구체적인 예시 부족
  - 100년 이상 차이 시 "경고 메시지"의 내용과 반환 형태가 불명확 (여전히 `isValid: true`인지, 별도 필드에 경고를 추가하는지)
  - "에러"가 예외를 throw하는 것인지, error 필드에 메시지를 담는 것인지 불명확

### 완전성
- **평가: 개선 필요**
- **의견:**
  - 타임존 처리 방식이 명시되지 않음 (서로 다른 타임존의 날짜 비교 시)
  - Invalid Date 객체를 입력받은 경우의 처리 방식 누락
  - 문자열과 Date 객체를 혼합해서 입력한 경우의 동작 미정의
  - 빈 문자열 입력 시나리오 누락
  - 숫자(timestamp)로 입력한 경우의 처리 누락
  - 미래 날짜에 대한 제약사항 없음 (비즈니스 로직에 따라 필요할 수 있음)

### 테스트 가능성
- **평가: 통과**
- **의견:**
  - 대부분의 요구사항이 명확한 입력-출력 관계로 정의되어 테스트 작성 가능
  - 엣지 케이스가 구체적으로 명시되어 있음
  - 다만 에러 메시지의 구체적인 내용이 명시되면 더 좋음

### 일관성
- **평가: 개선 필요**
- **의견:**
  - 에러 처리 방식이 일관적이지 않음: "null/undefined 입력시 에러"와 "무효한 경우 `{ isValid: false, error: string }`"이 충돌 (예외 throw vs 에러 객체 반환)
  - 100년 이상 차이 시 "유효 (경고 메시지)"의 반환 형태가 섹션 3의 출력 형식과 맞지 않음

---

## 개선된 명세

# 날짜 범위 검증 함수 명세

## 기능 설명
두 날짜 사이의 기간이 유효한지 검증하는 함수를 구현합니다.

## 함수 시그니처
```typescript
function validateDateRange(
  startDate: Date | string,
  endDate: Date | string
): ValidationResult

type ValidationResult = {
  isValid: boolean;
  error?: string;
  warning?: string;
}
```

## 요구사항

### 1. 입력 파라미터

#### `startDate`
- **허용 타입**: Date 객체 또는 ISO 8601 문자열
- **ISO 8601 형식**: `YYYY-MM-DD` 또는 `YYYY-MM-DDTHH:mm:ss.sssZ`
- **타임존**: UTC 기준으로 정규화하여 비교

#### `endDate`
- **허용 타입**: Date 객체 또는 ISO 8601 문자열
- **ISO 8601 형식**: `YYYY-MM-DD` 또는 `YYYY-MM-DDTHH:mm:ss.sssZ`
- **타임존**: UTC 기준으로 정규화하여 비교

### 2. 출력 형식

#### 성공 케이스
```typescript
{ isValid: true }
```

#### 실패 케이스
```typescript
{ 
  isValid: false, 
  error: "구체적인 에러 메시지" 
}
```

#### 경고 케이스
```typescript
{ 
  isValid: true, 
  warning: "100년 이상의 날짜 범위입니다" 
}
```

### 3. 유효성 검증 규칙

#### 3.1 날짜 순서 검증
- `startDate <= endDate`: 유효
- `startDate > endDate`: 무효 (error: "시작일은 종료일보다 이후일 수 없습니다")

#### 3.2 날짜 비교 방식
- Date 객체의 경우: 밀리초 단위로 비교
- ISO 8601 문자열의 경우: Date 객체로 변환 후 비교
- 날짜만 있는 경우(`YYYY-MM-DD`): 해당 날짜의 00:00:00 UTC로 간주

### 4. 에러 처리

다음 경우 `{ isValid: false, error: string }` 반환:

| 케이스 | error 메시지 |
|--------|-------------|
| startDate가 null | "시작일이 제공되지 않았습니다" |
| startDate가 undefined | "시작일이 제공되지 않았습니다" |
| endDate가 null | "종료일이 제공되지 않았습니다" |
| endDate가 undefined | "종료일이 제공되지 않았습니다" |
| startDate가 빈 문자열 | "시작일 형식이 올바르지 않습니다" |
| endDate가 빈 문자열 | "종료일 형식이 올바르지 않습니다" |
| startDate가 Invalid Date | "시작일 형식이 올바르지 않습니다" |
| endDate가 Invalid Date | "종료일 형식이 올바르지 않습니다" |
| ISO 8601 형식이 아닌 문자열 | "날짜는 YYYY-MM-DD 또는 ISO 8601 형식이어야 합니다" |
| startDate > endDate | "시작일은 종료일보다 이후일 수 없습니다" |

### 5. 엣지 케이스

| 케이스 | 결과 | 비고 |
|--------|------|------|
| startDate === endDate | `{ isValid: true }` | 같은 날짜는 유효 |
| 1일 차이 | `{ isValid: true }` | - |
| 100년 이상 차이 | `{ isValid: true, warning: "100년 이상의 날짜 범위입니다" }` | 36,500일 (100 * 365) 이상 |
| Date 객체와 문자열 혼합 | 정상 처리 | 둘 다 Date로 정규화하여 비교 |
| 윤년 포함 기간 | 정상 처리 | Date 객체가 자동 처리 |
| 타임존이 다른 날짜 문자열 | 정상 처리 | UTC로 정규화하여 비교 |
| 1970-01-01 이전 날짜 | 정상 처리 | 과거 날짜 제한 없음 |
| 2100-01-01 이후 날짜 | 정상 처리 | 미래 날짜 제한 없음 |

### 6. 예제

#### 유효한 케이스
```typescript
validateDateRange('2024-01-01', '2024-12-31')
// { isValid: true }

validateDateRange(new Date('2024-01-01'), new Date('2024-01-01'))
// { isValid: true }

validateDateRange('2024-01-01', '2150-01-01')
// { isValid: true, warning: "100년 이상의 날짜 범위입니다" }
```

#### 무효한 케이스
```typescript
validateDateRange('2024-12-31', '2024-01-01')
// { isValid: false, error: "시작일은 종료일보다 이후일 수 없습니다" }

validateDateRange(null, '2024-01-01')
// { isValid: false, error: "시작일이 제공되지 않았습니다" }

validateDateRange('invalid-date', '2024-01-01')
// { isValid: false, error: "날짜는 YYYY-MM-DD 또는 ISO 8601 형식이어야 합니다" }
```

### 7. 성능 요구사항
- 단일 검증 실행 시간: 1ms 이하
- 예외 throw 금지 (모든 에러는 ValidationResult로 반환)

### 8. 의존성
- 외부 라이브러리 사용 금지 (네이티브 Date 객체만 사용)

---

이 개선된 명세는 모호성을 제거하고, 모든 엣지 케이스를 포함하며, 구체적인 에러 메시지와 함께 테스트 가능한 형태로 작성되었습니다.

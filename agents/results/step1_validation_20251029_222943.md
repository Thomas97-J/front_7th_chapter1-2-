이미 구현된 코드를 확인했습니다. 이제 명세를 체계적으로 검증하겠습니다.

## 검증 결과

### 명확성
- **평가**: 개선 필요
- **의견**: 
  - ISO 8601 문자열의 정확한 형식이 명시되지 않음 (예: `2024-01-01`, `2024-01-01T00:00:00Z` 등)
  - "유효한 경우"와 "무효한 경우"의 출력 형식이 불일치함 (유효한 경우 error 필드가 없는지 불명확)
  - "경고 메시지"의 정확한 반환 형식이 명시되지 않음 (error인지 별도 필드인지)
  - "잘못된 날짜 형식"의 구체적인 예시가 없음 (예: "abc", "2024-13-01", "invalid" 등)

### 완전성
- **평가**: 개선 필요
- **의견**:
  - 빈 문자열 처리 명시되지 않음 (`""`)
  - 시간대(timezone) 처리 방침이 없음 (UTC vs Local time)
  - Invalid Date 객체 처리가 명시되지 않음 (`new Date("invalid")`)
  - 음수 날짜, 미래 제한 등 비즈니스 규칙이 없음
  - 두 입력이 모두 null/undefined인 경우 명시되지 않음
  - 경고와 에러를 동시에 반환할 수 있는지 불명확
  - 출력 타입이 명세와 구현이 다름 (warning 필드 누락)

### 테스트 가능성
- **평가**: 통과
- **의견**:
  - 각 요구사항이 입력과 출력으로 명확히 정의됨
  - 엣지 케이스가 구체적인 조건으로 명시됨 (같은 날짜, 1일 차이, 100년)
  - 에러 케이스가 명확히 구분됨
  - 하지만 에러 메시지의 정확한 텍스트가 명시되지 않아 테스트 작성 시 임의로 정해야 함

### 일관성
- **평가**: 개선 필요
- **의견**:
  - 출력 형식이 일관되지 않음: 
    - 유효한 경우 `{ isValid: true }` 
    - 무효한 경우 `{ isValid: false, error: string }`
    - 경고 경우는 형식이 명시되지 않음
  - "100년 이상 차이"를 유효하면서 경고를 반환하는 것은 모순적일 수 있음 (isValid: true와 warning을 동시에 반환)
  - "같은 날짜: 유효"와 "시작일이 종료일보다 이전이면 유효"는 일관성 있음

## 개선된 명세

# 날짜 범위 검증 함수 명세 v2.0

## 기능 설명
두 날짜 사이의 기간이 유효한지 검증하는 함수를 구현합니다.

## 함수 시그니처
```typescript
function validateDateRange(
  startDate: Date | string | null | undefined,
  endDate: Date | string | null | undefined
): ValidationResult

interface ValidationResult {
  isValid: boolean;
  error?: string;
  warning?: string;
}
```

## 요구사항

### 1. 입력 타입
- `startDate`: Date 객체, ISO 8601 형식 문자열, null, 또는 undefined
- `endDate`: Date 객체, ISO 8601 형식 문자열, null, 또는 undefined

**지원 문자열 형식:**
- ISO 8601 형식: `YYYY-MM-DD` (예: `"2024-01-01"`)
- ISO 8601 DateTime: `YYYY-MM-DDTHH:mm:ss.sssZ` (예: `"2024-01-01T00:00:00.000Z"`)
- JavaScript Date.parse()가 파싱 가능한 모든 형식

**시간대 처리:**
- 모든 날짜는 로컬 시간대로 해석됩니다
- 시간 정보가 없는 경우 00:00:00으로 간주합니다

### 2. 출력 타입
```typescript
interface ValidationResult {
  isValid: boolean;    // 검증 통과 여부
  error?: string;      // 에러 메시지 (isValid가 false일 때만)
  warning?: string;    // 경고 메시지 (isValid가 true지만 주의 필요할 때)
}
```

**출력 규칙:**
- `isValid === true`이고 경고 없음: `{ isValid: true }`
- `isValid === true`이고 경고 있음: `{ isValid: true, warning: string }`
- `isValid === false`: `{ isValid: false, error: string }`
- `error`와 `warning`은 동시에 존재하지 않습니다

### 3. 검증 규칙

#### 3.1 필수 입력 검증 (우선순위 1)
| 조건 | isValid | error 메시지 |
|------|---------|--------------|
| 두 값 모두 null/undefined | false | "시작일과 종료일은 필수입니다" |
| startDate만 null/undefined | false | "시작일은 필수입니다" |
| endDate만 null/undefined | false | "종료일은 필수입니다" |
| startDate가 빈 문자열 | false | "시작일은 필수입니다" |
| endDate가 빈 문자열 | false | "종료일은 필수입니다" |

#### 3.2 형식 검증 (우선순위 2)
| 조건 | isValid | error 메시지 |
|------|---------|--------------|
| startDate가 유효하지 않은 Date 객체 | false | "시작일 형식이 올바르지 않습니다" |
| endDate가 유효하지 않은 Date 객체 | false | "종료일 형식이 올바르지 않습니다" |
| startDate 문자열 파싱 실패 | false | "시작일 형식이 올바르지 않습니다" |
| endDate 문자열 파싱 실패 | false | "종료일 형식이 올바르지 않습니다" |

**유효하지 않은 예시:**
- `new Date("invalid")`
- `"abc"`
- `"2024-13-01"` (잘못된 월)
- `"2024-02-30"` (존재하지 않는 날짜)
- `NaN`

#### 3.3 날짜 비교 검증 (우선순위 3)
| 조건 | isValid | error 메시지 |
|------|---------|--------------|
| startDate > endDate | false | "시작일은 종료일보다 이전이어야 합니다" |
| startDate === endDate | true | - |
| startDate < endDate | true | - |

#### 3.4 경고 조건 (우선순위 4)
| 조건 | isValid | warning 메시지 |
|------|---------|----------------|
| endDate - startDate >= 100년 | true | "날짜 범위가 100년 이상입니다" |

**100년 계산 방식:**
- `(endDate - startDate) / (1000 * 60 * 60 * 24 * 365.25) >= 100`
- 윤년을 고려하여 365.25일 기준으로 계산

### 4. 엣지 케이스

| 케이스 | startDate | endDate | 예상 결과 |
|--------|-----------|---------|-----------|
| 같은 날짜 | 2024-01-01 | 2024-01-01 | `{ isValid: true }` |
| 1일 차이 | 2024-01-01 | 2024-01-02 | `{ isValid: true }` |
| 100년 정확히 | 1924-01-01 | 2024-01-01 | `{ isValid: true, warning: "날짜 범위가 100년 이상입니다" }` |
| 100년 초과 | 1900-01-01 | 2024-01-01 | `{ isValid: true, warning: "날짜 범위가 100년 이상입니다" }` |
| 1일 역순 | 2024-01-02 | 2024-01-01 | `{ isValid: false, error: "시작일은 종료일보다 이전이어야 합니다" }` |
| Date 객체 혼합 | new Date(2024,0,1) | "2024-01-02" | `{ isValid: true }` |
| 시간 포함 | 2024-01-01T12:00 | 2024-01-01T13:00 | `{ isValid: true }` |

### 5. 비기능 요구사항
- 함수는 순수 함수여야 합니다 (부수효과 없음)
- 입력 객체를 변경하지 않습니다
- 시간 복잡도: O(1)
- 예외를 던지지 않고 항상 ValidationResult를 반환합니다

### 6. 테스트 체크리스트
- [ ] null/undefined 입력 모든 조합
- [ ] 빈 문자열 입력
- [ ] 유효하지 않은 날짜 형식
- [ ] Invalid Date 객체
- [ ] 같은 날짜
- [ ] 시작일 > 종료일
- [ ] 시작일 < 종료일
- [ ] 정확히 100년 차이
- [ ] 100년 이상 차이
- [ ] Date 객체와 문자열 혼합 입력
- [ ] 시간 정보 포함된 날짜
- [ ] 윤년 경계 케이스

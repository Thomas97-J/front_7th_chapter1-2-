제공하신 날짜 범위 검증 함수 명세를 검토하겠습니다.

## 검증 결과

### 명확성
- **평가**: 개선 필요
- **의견**: 
  - "유효한지 검증"이라는 표현이 모호합니다. 무엇을 기준으로 유효한가?
  - "ISO 8601 문자열"의 정확한 형식이 명시되지 않음 (예: `2024-01-01`, `2024-01-01T00:00:00Z`)
  - 에러 메시지(`error: string`)의 구체적인 형식과 내용이 불명확
  - "경고 메시지"가 어디에 어떻게 포함되는지 불명확 (반환값? 로그?)
  - 시간대(timezone) 처리 방법이 명시되지 않음

### 완전성
- **평가**: 개선 필요
- **의견**:
  - **누락된 엣지 케이스**:
    - 유효하지 않은 Date 객체 입력 (예: `new Date('invalid')`)
    - 빈 문자열 입력
    - 숫자, boolean 등 다른 타입 입력
    - 과거/미래 극단값 (예: `new Date(0)`, 매우 먼 미래)
  - **누락된 요구사항**:
    - 함수 이름이 명시되지 않음
    - TypeScript 타입 정의 필요 여부
    - 성능 요구사항 (대량 호출 시나리오)
  - **경고 조건의 불완전성**:
    - 100년 이상에서만 경고? 10년, 50년은?
    - 경고는 유효 판정에 영향을 미치는가?

### 테스트 가능성
- **평가**: 개선 필요
- **의견**:
  - 에러 메시지의 정확한 내용이 명시되지 않아 테스트 작성 어려움
  - "경고 메시지"의 검증 방법 불명확
  - 예상 입력/출력 예시가 없어 구현자마다 다르게 해석 가능
  - 경계값이 구체적이지 않음 (100년 = 정확히 365일 × 100? 윤년 포함?)

### 일관성
- **평가**: 개선 필요
- **의견**:
  - **충돌 사항**:
    - "100년 이상 차이: 유효 (경고 메시지)"는 출력 형식 `{ isValid: true }`와 충돌
    - 경고가 있으면 반환 타입이 달라져야 하는데 명시 안 됨
  - **모순**:
    - "같은 날짜: 유효"는 명확하지만, 시간까지 같아야 하는지 불명확
    - Date 객체는 밀리초 단위인데, 문자열은 날짜만 비교하는지 모호

---

## 개선된 명세

# 예제 기능 명세: 날짜 범위 검증 함수

## 1. 개요
시작일과 종료일을 받아 날짜 범위가 논리적으로 유효한지 검증하는 순수 함수입니다.

**함수명**: `validateDateRange`

## 2. 함수 시그니처

```typescript
type DateInput = Date | string;

interface ValidationSuccess {
  isValid: true;
  warning?: string;
}

interface ValidationError {
  isValid: false;
  error: string;
}

type ValidationResult = ValidationSuccess | ValidationError;

function validateDateRange(
  startDate: DateInput,
  endDate: DateInput
): ValidationResult;
```

## 3. 입력 요구사항

### 3.1 허용 타입
- `Date` 객체: JavaScript Date 인스턴스
- `string`: ISO 8601 형식 (`YYYY-MM-DD` 또는 `YYYY-MM-DDTHH:mm:ss.sssZ`)

### 3.2 입력 전처리
- 문자열 입력은 `new Date(input)`으로 변환
- 시간대는 UTC로 정규화하여 비교
- 시간 정보가 없는 경우 00:00:00.000으로 간주

## 4. 검증 규칙

### 4.1 유효성 조건 (우선순위 순)

#### P1: 입력 타입 검증
```
입력: null, undefined, 빈 문자열, 숫자, boolean, 객체(Date 제외)
출력: { isValid: false, error: "Invalid input type. Expected Date or ISO 8601 string." }
```

#### P2: 날짜 파싱 검증
```
입력: new Date('invalid'), "not-a-date", "2024-13-01"
출력: { isValid: false, error: "Invalid date format. Unable to parse '[입력값]'." }
```

#### P3: 날짜 순서 검증
```
조건: startDate > endDate
출력: { isValid: false, error: "Start date must be before or equal to end date." }
```

#### P4: 정상 범위
```
조건: startDate <= endDate && (endDate - startDate) < 100년
출력: { isValid: true }
```

#### P5: 경고 범위
```
조건: startDate <= endDate && (endDate - startDate) >= 100년
출력: { 
  isValid: true, 
  warning: "Date range exceeds 100 years. Please verify if this is intentional." 
}
```

### 4.2 기간 계산
- 100년 = 36,525일 (윤년 포함 평균)
- 밀리초 기준: 100년 = 100 × 365.25 × 24 × 60 × 60 × 1000 = 3,155,760,000,000ms

## 5. 출력 명세

### 5.1 성공 (유효)
```typescript
// 일반적인 경우
{ isValid: true }

// 100년 이상 차이
{ 
  isValid: true,
  warning: "Date range exceeds 100 years. Please verify if this is intentional."
}
```

### 5.2 실패 (무효)
```typescript
{
  isValid: false,
  error: string // 위 4.1의 정확한 메시지
}
```

## 6. 테스트 케이스

### 6.1 정상 케이스
```typescript
// TC-001: 같은 날짜
validateDateRange('2024-01-01', '2024-01-01')
// Expected: { isValid: true }

// TC-002: 1일 차이
validateDateRange('2024-01-01', '2024-01-02')
// Expected: { isValid: true }

// TC-003: 1년 차이
validateDateRange('2024-01-01', '2025-01-01')
// Expected: { isValid: true }

// TC-004: Date 객체 입력
validateDateRange(new Date('2024-01-01'), new Date('2024-12-31'))
// Expected: { isValid: true }

// TC-005: 혼합 입력 (Date + string)
validateDateRange(new Date('2024-01-01'), '2024-12-31')
// Expected: { isValid: true }
```

### 6.2 경고 케이스
```typescript
// TC-006: 정확히 100년
validateDateRange('1924-01-01', '2024-01-01')
// Expected: { isValid: true, warning: "Date range exceeds 100 years..." }

// TC-007: 100년 초과
validateDateRange('1900-01-01', '2024-01-01')
// Expected: { isValid: true, warning: "Date range exceeds 100 years..." }
```

### 6.3 에러 케이스
```typescript
// TC-008: null 입력
validateDateRange(null, '2024-01-01')
// Expected: { isValid: false, error: "Invalid input type..." }

// TC-009: undefined 입력
validateDateRange('2024-01-01', undefined)
// Expected: { isValid: false, error: "Invalid input type..." }

// TC-010: 빈 문자열
validateDateRange('', '2024-01-01')
// Expected: { isValid: false, error: "Invalid input type..." }

// TC-011: 잘못된 형식
validateDateRange('not-a-date', '2024-01-01')
// Expected: { isValid: false, error: "Invalid date format. Unable to parse 'not-a-date'." }

// TC-012: 유효하지 않은 Date
validateDateRange(new Date('invalid'), '2024-01-01')
// Expected: { isValid: false, error: "Invalid date format. Unable to parse 'Invalid Date'." }

// TC-013: 역순 날짜
validateDateRange('2024-12-31', '2024-01-01')
// Expected: { isValid: false, error: "Start date must be before or equal to end date." }

// TC-014: 숫자 타입
validateDateRange(20240101, '2024-01-01')
// Expected: { isValid: false, error: "Invalid input type..." }
```

### 6.4 엣지 케이스
```typescript
// TC-015: 극소값
validateDateRange(new Date(0), new Date(1))
// Expected: { isValid: true }

// TC-016: 극대값
validateDateRange('2024-01-01', '9999-12-31')
// Expected: { isValid: true, warning: "Date range exceeds 100 years..." }

// TC-017: 윤년 경계
validateDateRange('2024-02-29', '2024-03-01')
// Expected: { isValid: true }

// TC-018: 시간 포함 (같은 날, 다른 시간)
validateDateRange('2024-01-01T10:00:00Z', '2024-01-01T14:00:00Z')
// Expected: { isValid: true }
```

## 7. 비기능 요구사항

### 7.1 성능
- 단일 호출 처리 시간: < 1ms
- 부수 효과 없음 (순수 함수)

### 7.2 호환성
- ES2015+ 환경
- Node.js 14+, 모던 브라우저

### 7.3 에러 핸들링
- 예외를 throw하지 않음
- 모든 에러는 반환값으로 표현

---

이 개선된 명세는 구현자가 정확히 동일한 방식으로 함수를 작성할 수 있도록 모호함을 제거하고, 모든 테스트 케이스가 명확한 예상 결과를 가지도록 작성되었습니다.

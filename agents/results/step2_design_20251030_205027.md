# í…ŒìŠ¤íŠ¸ ì„¤ê³„ ë¬¸ì„œ: Schedule Recurring Rule

## ğŸ“‹ í…ŒìŠ¤íŠ¸ ê°œìš”

**ëŒ€ìƒ ëª¨ë“ˆ**: `scheduleRecurringRule`  
**í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬**: Vitest  
**í…ŒìŠ¤íŠ¸ íŒŒì¼ ìœ„ì¹˜**: `src/__tests__/unit/scheduleRecurringRule.spec.ts`  
**í…ŒìŠ¤íŠ¸ íƒ€ì…**: Unit Tests (ìˆœìˆ˜ í•¨ìˆ˜ ê²€ì¦)

---

## ğŸ¯ í…ŒìŠ¤íŠ¸ ì „ëµ

1. **ê°€ì¥ ë‹¨ìˆœí•œ ì¼€ì´ìŠ¤ë¶€í„° ì‹œì‘** (ë§¤ì¼ ë°˜ë³µ)
2. **ê° ë°˜ë³µ ìœ í˜•ë³„ë¡œ ë…ë¦½ì  ê²€ì¦**
3. **ê²½ê³„ ì¡°ê±´ ë° ì˜ˆì™¸ ìƒí™© ì§‘ì¤‘ ê²€ì¦** (31ì¼, ìœ¤ë…„)
4. **ì™¸ë¶€ ì˜ì¡´ì„± ì—†ìŒ** (ìˆœìˆ˜ í•¨ìˆ˜ ê°€ì •)

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸: Daily Recurrence

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 1.1
- **ì´ë¦„**: `should generate next day when recurring daily`
- **íƒ€ì…**: unit
- **ìš°ì„ ìˆœìœ„**: high
- **Given**: ì‹œì‘ì¼ì´ `2024-01-31`
- **When**: ë°˜ë³µ ìœ í˜•ì´ `daily`ì´ê³  1ê°œì˜ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•  ë•Œ
- **Then**: `2024-02-01` ë‚ ì§œê°€ ë°˜í™˜ë˜ì–´ì•¼ í•¨

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 1.2
- **ì´ë¦„**: `should generate multiple consecutive days when recurring daily`
- **íƒ€ì…**: unit
- **ìš°ì„ ìˆœìœ„**: high
- **Given**: ì‹œì‘ì¼ì´ `2024-01-31`
- **When**: ë°˜ë³µ ìœ í˜•ì´ `daily`ì´ê³  3ê°œì˜ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•  ë•Œ
- **Then**: `['2024-02-01', '2024-02-02', '2024-02-03']` ë°°ì—´ì´ ë°˜í™˜ë˜ì–´ì•¼ í•¨

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 1.3
- **ì´ë¦„**: `should handle month boundary correctly when recurring daily`
- **íƒ€ì…**: edge
- **ìš°ì„ ìˆœìœ„**: medium
- **Given**: ì‹œì‘ì¼ì´ `2024-01-30`
- **When**: ë°˜ë³µ ìœ í˜•ì´ `daily`ì´ê³  5ê°œì˜ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•  ë•Œ
- **Then**: 1ì›” 31ì¼ â†’ 2ì›” 1ì¼ ê²½ê³„ë¥¼ ì˜¬ë°”ë¥´ê²Œ ë„˜ì–´ì•¼ í•¨

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸: Weekly Recurrence

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 2.1
- **ì´ë¦„**: `should generate same weekday when recurring weekly`
- **íƒ€ì…**: unit
- **ìš°ì„ ìˆœìœ„**: high
- **Given**: ì‹œì‘ì¼ì´ `2024-01-31` (ìˆ˜ìš”ì¼)
- **When**: ë°˜ë³µ ìœ í˜•ì´ `weekly`ì´ê³  1ê°œì˜ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•  ë•Œ
- **Then**: `2024-02-07` (ìˆ˜ìš”ì¼)ì´ ë°˜í™˜ë˜ì–´ì•¼ í•¨

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 2.2
- **ì´ë¦„**: `should generate multiple weeks with same weekday when recurring weekly`
- **íƒ€ì…**: unit
- **ìš°ì„ ìˆœìœ„**: high
- **Given**: ì‹œì‘ì¼ì´ `2024-01-31` (ìˆ˜ìš”ì¼)
- **When**: ë°˜ë³µ ìœ í˜•ì´ `weekly`ì´ê³  3ê°œì˜ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•  ë•Œ
- **Then**: `['2024-02-07', '2024-02-14', '2024-02-21']` ë°°ì—´ì´ ë°˜í™˜ë˜ì–´ì•¼ í•¨ (ëª¨ë‘ ìˆ˜ìš”ì¼)

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 2.3
- **ì´ë¦„**: `should preserve weekday across month boundaries when recurring weekly`
- **íƒ€ì…**: edge
- **ìš°ì„ ìˆœìœ„**: medium
- **Given**: ì‹œì‘ì¼ì´ `2024-01-31` (ìˆ˜ìš”ì¼)
- **When**: ë°˜ë³µ ìœ í˜•ì´ `weekly`ì´ê³  5ê°œì˜ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•  ë•Œ
- **Then**: ëª¨ë“  ë‚ ì§œê°€ ìˆ˜ìš”ì¼ì´ì–´ì•¼ í•˜ë©°, ì •í™•íˆ 7ì¼ ê°„ê²©ì´ì–´ì•¼ í•¨

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸: Monthly Recurrence

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 3.1
- **ì´ë¦„**: `should skip February when starting on 31st and recurring monthly`
- **íƒ€ì…**: unit
- **ìš°ì„ ìˆœìœ„**: high
- **Given**: ì‹œì‘ì¼ì´ `2024-01-31`
- **When**: ë°˜ë³µ ìœ í˜•ì´ `monthly`ì´ê³  1ê°œì˜ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•  ë•Œ
- **Then**: `2024-03-31`ì´ ë°˜í™˜ë˜ì–´ì•¼ í•¨ (2ì›”ì€ 31ì¼ì´ ì—†ìœ¼ë¯€ë¡œ ìŠ¤í‚µ)

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 3.2
- **ì´ë¦„**: `should only generate on 31st when recurring monthly from 31st`
- **íƒ€ì…**: unit
- **ìš°ì„ ìˆœìœ„**: high
- **Given**: ì‹œì‘ì¼ì´ `2024-01-31`
- **When**: ë°˜ë³µ ìœ í˜•ì´ `monthly`ì´ê³  2ê°œì˜ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•  ë•Œ
- **Then**: `['2024-03-31', '2024-05-31']`ì´ ë°˜í™˜ë˜ì–´ì•¼ í•¨ (2ì›”, 4ì›” ìŠ¤í‚µ)

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 3.3
- **ì´ë¦„**: `should generate all months when starting from a day that exists in all months`
- **íƒ€ì…**: unit
- **ìš°ì„ ìˆœìœ„**: medium
- **Given**: ì‹œì‘ì¼ì´ `2024-01-15`
- **When**: ë°˜ë³µ ìœ í˜•ì´ `monthly`ì´ê³  3ê°œì˜ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•  ë•Œ
- **Then**: `['2024-02-15', '2024-03-15', '2024-04-15']`ì´ ë°˜í™˜ë˜ì–´ì•¼ í•¨

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 3.4
- **ì´ë¦„**: `should handle 30th correctly when recurring monthly`
- **íƒ€ì…**: edge
- **ìš°ì„ ìˆœìœ„**: medium
- **Given**: ì‹œì‘ì¼ì´ `2024-01-30`
- **When**: ë°˜ë³µ ìœ í˜•ì´ `monthly`ì´ê³  3ê°œì˜ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•  ë•Œ
- **Then**: 2ì›”(28ì¼ê¹Œì§€)ì„ ìŠ¤í‚µí•˜ê³  `['2024-03-30', '2024-04-30', '2024-05-30']`ì´ ë°˜í™˜ë˜ì–´ì•¼ í•¨

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 3.5
- **ì´ë¦„**: `should handle year boundary when recurring monthly`
- **íƒ€ì…**: edge
- **ìš°ì„ ìˆœìœ„**: low
- **Given**: ì‹œì‘ì¼ì´ `2024-11-15`
- **When**: ë°˜ë³µ ìœ í˜•ì´ `monthly`ì´ê³  3ê°œì˜ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•  ë•Œ
- **Then**: `['2024-12-15', '2025-01-15', '2025-02-15']`ì´ ë°˜í™˜ë˜ì–´ì•¼ í•¨

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸: Yearly Recurrence

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 4.1
- **ì´ë¦„**: `should skip non-leap years when starting from Feb 29th and recurring yearly`
- **íƒ€ì…**: unit
- **ìš°ì„ ìˆœìœ„**: high
- **Given**: ì‹œì‘ì¼ì´ `2024-02-29` (ìœ¤ë…„)
- **When**: ë°˜ë³µ ìœ í˜•ì´ `yearly`ì´ê³  1ê°œì˜ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•  ë•Œ
- **Then**: `2028-02-29`ì´ ë°˜í™˜ë˜ì–´ì•¼ í•¨ (2025, 2026, 2027ì€ ìœ¤ë…„ì´ ì•„ë‹ˆë¯€ë¡œ ìŠ¤í‚µ)

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 4.2
- **ì´ë¦„**: `should generate only leap years when starting from Feb 29th and recurring yearly`
- **íƒ€ì…**: unit
- **ìš°ì„ ìˆœìœ„**: high
- **Given**: ì‹œì‘ì¼ì´ `2024-02-29`
- **When**: ë°˜ë³µ ìœ í˜•ì´ `yearly`ì´ê³  2ê°œì˜ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•  ë•Œ
- **Then**: `['2028-02-29', '2032-02-29']`ì´ ë°˜í™˜ë˜ì–´ì•¼ í•¨

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 4.3
- **ì´ë¦„**: `should generate every year when starting from a regular date and recurring yearly`
- **íƒ€ì…**: unit
- **ìš°ì„ ìˆœìœ„**: medium
- **Given**: ì‹œì‘ì¼ì´ `2024-01-31`
- **When**: ë°˜ë³µ ìœ í˜•ì´ `yearly`ì´ê³  3ê°œì˜ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•  ë•Œ
- **Then**: `['2025-01-31', '2026-01-31', '2027-01-31']`ì´ ë°˜í™˜ë˜ì–´ì•¼ í•¨

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 4.4
- **ì´ë¦„**: `should handle century leap year rule correctly when recurring yearly`
- **íƒ€ì…**: edge
- **ìš°ì„ ìˆœìœ„**: low
- **Given**: ì‹œì‘ì¼ì´ `2096-02-29` (ìœ¤ë…„)
- **When**: ë°˜ë³µ ìœ í˜•ì´ `yearly`ì´ê³  2ê°œì˜ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•  ë•Œ
- **Then**: `2100-02-29`ë¥¼ ìŠ¤í‚µí•˜ê³  (400ì˜ ë°°ìˆ˜ê°€ ì•„ë‹ˆë¯€ë¡œ í‰ë…„) `['2104-02-29', '2108-02-29']`ì´ ë°˜í™˜ë˜ì–´ì•¼ í•¨

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸: Edge Cases & Validation

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 5.1
- **ì´ë¦„**: `should return empty array when count is 0`
- **íƒ€ì…**: edge
- **ìš°ì„ ìˆœìœ„**: medium
- **Given**: ì‹œì‘ì¼ì´ `2024-01-31`
- **When**: ë°˜ë³µ ìœ í˜•ì´ `daily`ì´ê³  0ê°œì˜ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•  ë•Œ
- **Then**: ë¹ˆ ë°°ì—´ `[]`ì´ ë°˜í™˜ë˜ì–´ì•¼ í•¨

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 5.2
- **ì´ë¦„**: `should handle negative count gracefully`
- **íƒ€ì…**: edge
- **ìš°ì„ ìˆœìœ„**: low
- **Given**: ì‹œì‘ì¼ì´ `2024-01-31`
- **When**: ë°˜ë³µ ìœ í˜•ì´ `daily`ì´ê³  -1ê°œì˜ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•  ë•Œ
- **Then**: ë¹ˆ ë°°ì—´ `[]`ì´ ë°˜í™˜ë˜ê±°ë‚˜ ì—ëŸ¬ë¥¼ ë˜ì ¸ì•¼ í•¨

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 5.3
- **ì´ë¦„**: `should handle invalid date format`
- **íƒ€ì…**: edge
- **ìš°ì„ ìˆœìœ„**: medium
- **Given**: ì‹œì‘ì¼ì´ `invalid-date`
- **When**: ë°˜ë³µ ìœ í˜•ì´ `daily`ì´ê³  1ê°œì˜ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•  ë•Œ
- **Then**: ì—ëŸ¬ë¥¼ ë˜ì§€ê±°ë‚˜ ë¹ˆ ë°°ì—´ì„ ë°˜í™˜í•´ì•¼ í•¨

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 5.4
- **ì´ë¦„**: `should handle invalid recurrence type`
- **íƒ€ì…**: edge
- **ìš°ì„ ìˆœìœ„**: medium
- **Given**: ì‹œì‘ì¼ì´ `2024-01-31`
- **When**: ë°˜ë³µ ìœ í˜•ì´ `invalid-type`ì¼ ë•Œ
- **Then**: ì—ëŸ¬ë¥¼ ë˜ì§€ê±°ë‚˜ ë¹ˆ ë°°ì—´ì„ ë°˜í™˜í•´ì•¼ í•¨

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 5.5
- **ì´ë¦„**: `should allow duplicate dates (no overlap check)`
- **íƒ€ì…**: unit
- **ìš°ì„ ìˆœìœ„**: high
- **Given**: ì‹œì‘ì¼ì´ `2024-01-31`
- **When**: ë°˜ë³µ ìœ í˜•ì´ `daily`ë¡œ ì¼ì •ì„ ìƒì„±í•˜ê³ , ì´ë¯¸ ê°™ì€ ë‚ ì§œì— ë‹¤ë¥¸ ì¼ì •ì´ ì¡´ì¬í•  ë•Œ
- **Then**: ê²¹ì¹¨ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ ìƒˆë¡œìš´ ì¼ì • ë‚ ì§œë¥¼ ë°˜í™˜í•´ì•¼ í•¨ (ì¤‘ë³µ ìƒì„± í—ˆìš©)

---

## ğŸ—ï¸ í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ ì¶”ë¡ 

```typescript
type RecurrenceType = 'daily' | 'weekly' | 'monthly' | 'yearly';

interface RecurrenceOptions {
  startDate: string; // YYYY-MM-DD format
  recurrenceType: RecurrenceType;
  count: number; // ìƒì„±í•  ë°˜ë³µ ì¼ì • ê°œìˆ˜
}

function scheduleRecurringRule(options: RecurrenceOptions): string[];
```

---

## ï¿½ï¿½ Mocking/Stubbing í•„ìš”ì„±

- **í•„ìš” ì—†ìŒ**: ìˆœìˆ˜ í•¨ìˆ˜ë¡œ ê°€ì •
- ë‚ ì§œ ê³„ì‚° ë¡œì§ë§Œ ê²€ì¦
- ì™¸ë¶€ ì˜ì¡´ì„± ì—†ìŒ (API, localStorage, DB ë“±)

---

## âœ… í…ŒìŠ¤íŠ¸ ì‘ì„± ìˆœì„œ (TDD Red-Green-Refactor)

1. **RED**: í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 1.1 ì‘ì„± â†’ ì‹¤íŒ¨ í™•ì¸
2. **GREEN**: ë§¤ì¼ ë°˜ë³µ ìµœì†Œ êµ¬í˜„ â†’ í…ŒìŠ¤íŠ¸ í†µê³¼
3. **RED**: í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 1.2 ì‘ì„± â†’ ì‹¤íŒ¨ í™•ì¸
4. **GREEN**: ë‹¤ì¤‘ ì¼ì • ìƒì„± êµ¬í˜„ â†’ í…ŒìŠ¤íŠ¸ í†µê³¼
5. **REFACTOR**: ì¤‘ë³µ ì œê±°, ì½”ë“œ ì •ë¦¬
6. **ë°˜ë³µ**: ë§¤ì£¼ â†’ ë§¤ì›” â†’ ë§¤ë…„ ìˆœì„œë¡œ ì§„í–‰

---

## ğŸ“Š ìš°ì„ ìˆœìœ„ë³„ í…ŒìŠ¤íŠ¸ ë¶„ë¥˜

### High Priority (11ê°œ)
- ê° ë°˜ë³µ ìœ í˜•ì˜ ê¸°ë³¸ ë™ì‘ ê²€ì¦
- 31ì¼, ìœ¤ë…„ ì˜ˆì™¸ ì²˜ë¦¬
- ì¤‘ë³µ ìƒì„± í—ˆìš© ê²€ì¦

### Medium Priority (6ê°œ)
- ì›”/ë…„ ê²½ê³„ ì²˜ë¦¬
- ëª¨ë“  ë‹¬ì— ì¡´ì¬í•˜ëŠ” ë‚ ì§œ ê²€ì¦
- ìœ íš¨ì„± ê²€ì‚¬

### Low Priority (3ê°œ)
- 400ë…„ ì£¼ê¸° ìœ¤ë…„ ê·œì¹™
- ìŒìˆ˜ ì¹´ìš´íŠ¸ ì²˜ë¦¬
- ë…„ë„ ê²½ê³„ ì²˜ë¦¬

---

## ğŸ¯ í’ˆì§ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] ê° í…ŒìŠ¤íŠ¸ëŠ” ë‹¨ì¼ ë™ì‘ë§Œ ê²€ì¦
- [x] AAA íŒ¨í„´ ì¤€ìˆ˜
- [x] í…ŒìŠ¤íŠ¸ ì´ë¦„ì´ ì˜ë„ë¥¼ ëª…í™•íˆ í‘œí˜„
- [x] ì™¸ë¶€ ì˜ì¡´ì„± ì—†ìŒ
- [x] ëª…ì„¸ì˜ ëª¨ë“  ì‹œë‚˜ë¦¬ì˜¤ ì»¤ë²„
- [x] ê²½ê³„ê°’ ë° ì˜ˆì™¸ ì¼€ì´ìŠ¤ í¬í•¨
- [x] í…ŒìŠ¤íŠ¸ ë…ë¦½ì„± ë³´ì¥

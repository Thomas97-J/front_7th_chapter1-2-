제공하신 명세를 검토하고 검증하겠습니다.

## 검증 결과

### 명확성
- **평가**: 개선 필요
- **의견**: 
  - ✓ 기본 동작과 입출력 형식은 명확함
  - ✗ "유효한지 검증"이 구체적으로 무엇을 의미하는지 모호함
  - ✗ "100년 이상 차이: 유효 (경고 메시지)"에서 경고 메시지가 반환값에 포함되는지, 로그로만 남는지 불명확
  - ✗ ISO 8601 문자열의 타임존 처리 방법이 명시되지 않음
  - ✗ "잘못된 날짜 형식"의 구체적인 예시가 없음

### 완전성
- **평가**: 개선 필요
- **의견**:
  - ✓ 기본적인 성공/실패 케이스 포함
  - ✗ 타임스탬프(시간) 처리 방법 누락 - 날짜만 비교? 시간까지 비교?
  - ✗ 타임존이 다른 날짜 입력 시 동작 미정의
  - ✗ 과거/미래 날짜에 대한 제약 없음 (필요 여부 불명확)
  - ✗ 빈 문자열 입력 케이스 누락
  - ✗ 숫자 타입(Unix timestamp) 입력 가능 여부 미정의
  - ✗ 100년 경고 기준이 임의적 - 비즈니스 로직 기반 명확한 근거 필요

### 테스트 가능성
- **평가**: 개선 필요
- **의견**:
  - ✓ 반환값 형식이 명확해 검증 가능
  - ✓ 기본 케이스들은 테스트 작성 가능
  - ✗ "경고 메시지"의 검증 방법 불명확
  - ✗ 에러 메시지의 구체적인 내용이 명시되지 않아 정확한 테스트 작성 어려움
  - ✗ "잘못된 날짜 형식"의 구체적인 테스트 케이스 예시 필요

### 일관성
- **평가**: 개선 필요
- **의견**:
  - ✓ 기본 로직은 일관성 있음
  - ✗ "100년 이상 차이: 유효 (경고 메시지)"가 반환 타입 정의와 충돌 가능
    - 출력 타입에 경고를 담을 필드가 정의되지 않음
  - ✗ 섹션 4(에러 처리)와 섹션 3(출력)의 관계가 명확하지 않음
    - 에러 발생 시 예외를 던지는지, error 필드로 반환하는지 불명확

---

## 개선된 명세

# 날짜 범위 검증 함수 명세

## 1. 개요
시작일과 종료일을 입력받아 날짜 범위의 유효성을 검증하는 순수 함수를 구현합니다.

## 2. 함수 시그니처
```typescript
function validateDateRange(
  startDate: Date | string,
  endDate: Date | string
): DateRangeValidationResult

type DateRangeValidationResult = 
  | { isValid: true; warning?: string }
  | { isValid: false; error: string }
```

## 3. 입력 명세

### 3.1 허용되는 입력 타입
- **Date 객체**: JavaScript Date 인스턴스
- **ISO 8601 문자열**: 'YYYY-MM-DD' 또는 'YYYY-MM-DDTHH:mm:ss.sssZ' 형식
  - 예: '2024-01-15' 또는 '2024-01-15T09:00:00.000Z'

### 3.2 입력 처리 규칙
- **타임존 처리**: 모든 날짜는 UTC 기준으로 변환하여 비교
- **시간 처리**: 날짜만 비교 (시, 분, 초는 00:00:00으로 정규화)
- **문자열 파싱**: ISO 8601 형식만 허용, 다른 형식은 에러

## 4. 유효성 검증 규칙

### 4.1 유효한 경우 (isValid: true)
| 조건 | 설명 | 예시 |
|------|------|------|
| startDate < endDate | 시작일이 종료일보다 이전 | start: 2024-01-01, end: 2024-01-02 |
| startDate === endDate | 시작일과 종료일이 동일 | start: 2024-01-01, end: 2024-01-01 |

### 4.2 무효한 경우 (isValid: false)
| 조건 | error 메시지 | 예시 |
|------|--------------|------|
| startDate > endDate | "Start date must be before or equal to end date" | start: 2024-01-02, end: 2024-01-01 |
| null 입력 | "Start date and end date are required" | startDate: null |
| undefined 입력 | "Start date and end date are required" | endDate: undefined |
| 빈 문자열 | "Invalid date format: date string cannot be empty" | startDate: "" |
| 잘못된 형식 | "Invalid date format: expected ISO 8601 (YYYY-MM-DD or ISO string)" | "01/15/2024" |
| Invalid Date | "Invalid date: date string does not represent a valid date" | "2024-02-30" |
| 잘못된 타입 | "Invalid input type: expected Date object or ISO 8601 string" | startDate: 123 |

### 4.3 경고 케이스 (isValid: true, warning 포함)
| 조건 | warning 메시지 |
|------|----------------|
| 범위 > 100년 | "Date range exceeds 100 years, please verify if this is intentional" |

## 5. 상세 동작 명세

### 5.1 처리 순서
1. 입력 타입 검증 (null, undefined, 빈 문자열)
2. Date 객체로 변환 (문자열인 경우)
3. 유효한 날짜인지 검증 (Invalid Date 체크)
4. UTC 기준 날짜만 추출 (시간 정규화)
5. 시작일 ≤ 종료일 검증
6. 100년 초과 여부 확인 (경고)

### 5.2 날짜 정규화 예시
```
입력: new Date('2024-01-15T15:30:45.123Z')
정규화: new Date('2024-01-15T00:00:00.000Z')
```

## 6. 엣지 케이스 및 예상 동작

### 6.1 경계값 테스트
| 케이스 | 입력 | 기대 결과 |
|--------|------|-----------|
| 같은 날짜 | start: 2024-01-01, end: 2024-01-01 | `{ isValid: true }` |
| 1일 차이 | start: 2024-01-01, end: 2024-01-02 | `{ isValid: true }` |
| 역순 1일 | start: 2024-01-02, end: 2024-01-01 | `{ isValid: false, error: "..." }` |
| 정확히 100년 | start: 1924-01-01, end: 2024-01-01 | `{ isValid: true }` |
| 100년 + 1일 | start: 1924-01-01, end: 2024-01-02 | `{ isValid: true, warning: "..." }` |

### 6.2 특수 케이스
| 케이스 | 입력 | 기대 결과 |
|--------|------|-----------|
| 윤년 경계 | start: 2024-02-29, end: 2024-03-01 | `{ isValid: true }` |
| 무효한 윤년 | start: 2023-02-29, end: ... | `{ isValid: false, error: "Invalid date..." }` |
| 서로 다른 타임존 | start: "2024-01-01T23:00:00+09:00", end: "2024-01-02T01:00:00+02:00" | UTC 변환 후 비교 |
| 혼합 타입 | start: Date 객체, end: ISO 문자열 | 정상 처리 |

## 7. 비기능 요구사항
- **순수 함수**: 외부 상태 변경 없음, 같은 입력에 같은 출력
- **불변성**: 입력 Date 객체 수정 금지
- **성능**: O(1) 시간 복잡도
- **에러 처리**: 예외를 던지지 않고 결과 객체로 반환

## 8. 테스트 체크리스트
- [ ] 정상 케이스: 유효한 날짜 범위
- [ ] 같은 날짜 입력
- [ ] 역순 날짜 입력
- [ ] null, undefined 입력
- [ ] 빈 문자열 입력
- [ ] 잘못된 형식 문자열
- [ ] Invalid Date (예: 2024-02-30)
- [ ] 잘못된 타입 (숫자, 객체 등)
- [ ] 100년 정확히
- [ ] 100년 초과 (경고 확인)
- [ ] 타임존이 다른 ISO 문자열
- [ ] 윤년 유효/무효 날짜
- [ ] Date 객체와 문자열 혼합 입력

---

이 개선된 명세는 모호함을 제거하고, 모든 엣지 케이스를 포함하며, 구체적인 에러 메시지와 테스트 가능한 조건을 제공합니다.

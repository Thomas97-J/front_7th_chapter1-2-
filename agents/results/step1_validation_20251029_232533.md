날짜 범위 검증 함수의 요구사항 명세를 검토하겠습니다.

## 검증 결과

### 명확성
- **평가: 개선 필요**
- **의견:**
  - "유효"의 정의가 불명확: 기본 동작에서는 "시작일 ≤ 종료일"이 유효로 보이지만, 에러 처리에서는 "시작일 > 종료일"을 에러로 처리
  - ISO 8601 문자열의 정확한 형식 미명시 (예: `2024-01-01`, `2024-01-01T00:00:00Z` 등 다양한 형식 존재)
  - 100년 이상 차이의 "경고 메시지"가 출력 형식에 어떻게 반영되는지 불명확 (경고만? 유효성은?)
  - 에러 메시지의 구체적인 내용이 명시되지 않음

### 완전성
- **평가: 개선 필요**
- **의견:**
  - 타임존 처리 방법이 명시되지 않음 (날짜 비교 시 중요한 요소)
  - 빈 문자열 입력 케이스 누락
  - Date 객체가 Invalid Date인 경우 처리 누락
  - 100년 이상 차이 시 경고의 정확한 기준값 미명시 (100년 포함? 초과?)
  - 음수 날짜나 극단적인 날짜 값 처리 누락 (예: 1900년 이전, 2100년 이후)
  - 문자열과 Date 객체 혼합 입력 케이스 누락

### 테스트 가능성
- **평가: 개선 필요**
- **의견:**
  - 에러 메시지의 구체적인 내용이 없어 정확한 테스트 어려움
  - "잘못된 날짜 형식"의 예시가 없음
  - 100년 경고 메시지의 정확한 텍스트 미명시
  - 경고가 있을 때의 반환값 구조가 불명확 (`isValid: true`이면서 경고를 어떻게 전달?)

### 일관성
- **평가: 개선 필요**
- **의견:**
  - 출력 형식의 불일치: 100년 이상 차이는 "유효"하지만 "경고 메시지"를 포함해야 하는데, 출력 형식에 경고 필드가 없음
  - 에러 처리 섹션의 "시작일이 종료일보다 이후"와 기본 동작의 유효성 조건이 서로 다른 관점에서 기술됨

---

## 개선된 명세

# 날짜 범위 검증 함수 명세 v2.0

## 기능 설명
두 날짜 사이의 기간이 유효한지 검증하는 함수를 구현합니다. 시작일이 종료일보다 이전이거나 같으면 유효한 날짜 범위로 간주합니다.

## 함수 시그니처
```typescript
function validateDateRange(
  startDate: Date | string,
  endDate: Date | string
): ValidationResult

interface ValidationResult {
  isValid: boolean;
  error?: string;
  warning?: string;
}
```

## 요구사항

### 1. 입력 형식
- `startDate`: Date 객체 또는 ISO 8601 문자열 (`YYYY-MM-DD` 또는 `YYYY-MM-DDTHH:mm:ss.sssZ`)
- `endDate`: Date 객체 또는 ISO 8601 문자열 (`YYYY-MM-DD` 또는 `YYYY-MM-DDTHH:mm:ss.sssZ`)
- 타임존: 모든 날짜는 UTC 기준으로 비교됩니다

### 2. 유효성 판단 기준
날짜 범위는 다음 조건을 **모두** 만족할 때 유효합니다:
- 두 입력값이 모두 null/undefined가 아님
- 두 입력값이 모두 유효한 날짜 형식임
- startDate ≤ endDate (시작일이 종료일보다 이전이거나 같음)

### 3. 출력 형식

#### 3.1 유효한 경우
```typescript
{ isValid: true }
```

#### 3.2 유효하지만 경고가 있는 경우
```typescript
{
  isValid: true,
  warning: "Date range exceeds 100 years. Please verify the dates are correct."
}
```
- 조건: 날짜 차이가 100년 초과 (36,525일 초과)

#### 3.3 무효한 경우
```typescript
{ isValid: false, error: "에러 메시지" }
```

### 4. 에러 메시지 명세

| 상황 | error 필드 값 |
|------|--------------|
| startDate가 null 또는 undefined | `"startDate is required"` |
| endDate가 null 또는 undefined | `"endDate is required"` |
| startDate가 빈 문자열 | `"startDate cannot be empty"` |
| endDate가 빈 문자열 | `"endDate cannot be empty"` |
| startDate가 잘못된 형식 또는 Invalid Date | `"startDate is not a valid date"` |
| endDate가 잘못된 형식 또는 Invalid Date | `"endDate is not a valid date"` |
| startDate > endDate | `"startDate must be before or equal to endDate"` |

### 5. 테스트 시나리오

#### 5.1 정상 케이스
- 같은 날짜: `validateDateRange('2024-01-01', '2024-01-01')` → `{ isValid: true }`
- 1일 차이: `validateDateRange('2024-01-01', '2024-01-02')` → `{ isValid: true }`
- 1년 차이: `validateDateRange('2024-01-01', '2025-01-01')` → `{ isValid: true }`
- Date 객체 입력: `validateDateRange(new Date('2024-01-01'), new Date('2024-12-31'))` → `{ isValid: true }`
- 혼합 입력: `validateDateRange('2024-01-01', new Date('2024-12-31'))` → `{ isValid: true }`

#### 5.2 경고 케이스
- 정확히 100년: `validateDateRange('1924-01-01', '2024-01-01')` → `{ isValid: true }` (경고 없음)
- 100년 1일: `validateDateRange('1924-01-01', '2024-01-02')` → `{ isValid: true, warning: "..." }`
- 200년 차이: `validateDateRange('1824-01-01', '2024-01-01')` → `{ isValid: true, warning: "..." }`

#### 5.3 에러 케이스
- null 입력: `validateDateRange(null, '2024-01-01')` → `{ isValid: false, error: "startDate is required" }`
- undefined 입력: `validateDateRange('2024-01-01', undefined)` → `{ isValid: false, error: "endDate is required" }`
- 빈 문자열: `validateDateRange('', '2024-01-01')` → `{ isValid: false, error: "startDate cannot be empty" }`
- 잘못된 형식: `validateDateRange('2024/01/01', '2024-01-01')` → `{ isValid: false, error: "startDate is not a valid date" }`
- 잘못된 날짜: `validateDateRange('2024-02-30', '2024-03-01')` → `{ isValid: false, error: "startDate is not a valid date" }`
- Invalid Date 객체: `validateDateRange(new Date('invalid'), '2024-01-01')` → `{ isValid: false, error: "startDate is not a valid date" }`
- 역순 날짜: `validateDateRange('2024-12-31', '2024-01-01')` → `{ isValid: false, error: "startDate must be before or equal to endDate" }`

#### 5.4 엣지 케이스
- 극단적 과거: `validateDateRange('1000-01-01', '2024-01-01')` → 유효 (경고 포함)
- 극단적 미래: `validateDateRange('2024-01-01', '3024-01-01')` → 유효 (경고 포함)
- 윤년 경계: `validateDateRange('2024-02-29', '2024-03-01')` → 유효
- 연말/연초: `validateDateRange('2024-12-31', '2025-01-01')` → 유효

### 6. 구현 참고사항
- 문자열 입력은 `new Date()`로 파싱
- Date 객체의 유효성은 `!isNaN(date.getTime())`으로 검증
- 날짜 차이 계산 시 밀리초 단위로 계산 후 일수로 변환
- 100년 = 36,525일 (윤년 25회 포함)

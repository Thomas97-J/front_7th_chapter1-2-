날짜 범위 검증 함수 명세를 상세하게 검토하겠습니다.

## 검증 결과

### 명확성
- **평가**: 개선 필요
- **의견**: 
  - "유효한 경우"의 정의가 명확하지만, 경고 메시지가 포함된 경우의 반환 형태가 불명확합니다 (100년 이상 차이 시)
  - ISO 8601 문자열의 구체적인 형식(예: `YYYY-MM-DD`, `YYYY-MM-DDTHH:mm:ss.sssZ`)이 명시되지 않음
  - "잘못된 날짜 형식"의 구체적인 예시가 없음 (예: "2023-02-30", "invalid-date")
  - 경고 메시지의 반환 구조가 명시되지 않음 (`isValid: true`이면서 경고가 있는 경우)

### 완전성
- **평가**: 개선 필요
- **의견**:
  - **누락된 엣지 케이스**:
    - 타임존 처리 방법 (서로 다른 타임존의 날짜 비교)
    - 시간 정보 포함 시 처리 방법 (날짜만 비교? 시간까지 비교?)
    - 윤년 처리 (2024-02-29 같은 날짜)
    - 매우 오래된 날짜 (1900년 이전) 또는 미래 날짜 제한
    - 빈 문자열 입력 시 처리
    - 배열이나 객체 등 잘못된 타입 입력 시 처리
  - **경고 메시지**: 100년 이상 차이 시 경고 메시지의 구체적인 내용과 형식 미정의

### 테스트 가능성
- **평가**: 통과 (부분적 개선 필요)
- **의견**:
  - 기본적인 테스트 조건은 명확하게 정의되어 있음
  - 하지만 에러 메시지의 구체적인 문구가 명시되지 않아 정확한 테스트 작성이 어려움
  - 경고 메시지의 검증 방법이 불명확함
  - 성공/실패 조건은 명확하게 검증 가능

### 일관성
- **평가**: 개선 필요
- **의견**:
  - **충돌 발견**: 
    - "같은 날짜: 유효"와 "시작일이 종료일보다 이전이면 유효" - 같은 경우는 "이전"이 아니므로 표현 불일치
    - 에러 처리에서 "시작일이 종료일보다 이후인 경우 에러"와 엣지 케이스 "같은 날짜: 유효"는 일관성 있으나, 기본 동작의 표현과 불일치
  - 출력 형식에서 경고가 있는 경우의 구조가 정의되지 않아 불일치 가능성

---

## 개선된 명세

# 날짜 범위 검증 함수 명세 v2.0

## 1. 기능 개요
시작일과 종료일을 입력받아 날짜 범위의 유효성을 검증하는 함수를 구현합니다.

## 2. 함수 시그니처
```typescript
function validateDateRange(
  startDate: Date | string,
  endDate: Date | string
): DateRangeValidationResult

interface DateRangeValidationResult {
  isValid: boolean;
  error?: string;
  warning?: string;
}
```

## 3. 입력 명세

### 3.1 허용되는 입력 형식
- **Date 객체**: JavaScript Date 인스턴스
- **ISO 8601 문자열**: 
  - `YYYY-MM-DD` (예: "2024-01-15")
  - `YYYY-MM-DDTHH:mm:ss.sssZ` (예: "2024-01-15T09:30:00.000Z")
  - `YYYY-MM-DDTHH:mm:ss+HH:mm` (예: "2024-01-15T09:30:00+09:00")

### 3.2 날짜 비교 규칙
- **시간 정보 처리**: 입력에 시간이 포함된 경우 시간까지 포함하여 비교
- **타임존 처리**: 
  - Date 객체: 로컬 타임존 기준
  - ISO 8601 문자열 (타임존 포함): 해당 타임존 기준으로 UTC 변환 후 비교
  - ISO 8601 문자열 (날짜만): 로컬 타임존의 00:00:00 기준

## 4. 출력 명세

### 4.1 성공 케이스
```typescript
{ isValid: true }
```

**조건**: `startDate <= endDate`

### 4.2 경고 포함 성공 케이스
```typescript
{ 
  isValid: true,
  warning: "Date range exceeds 100 years. Please verify this is intentional."
}
```

**조건**: `startDate <= endDate` 이고 기간이 100년(36,500일) 초과

### 4.3 실패 케이스
```typescript
{ 
  isValid: false,
  error: "[에러 메시지]"
}
```

## 5. 에러 처리 명세

| 케이스 | 조건 | 에러 메시지 |
|--------|------|-------------|
| null 입력 | `startDate` 또는 `endDate`가 `null` | "startDate and endDate cannot be null" |
| undefined 입력 | `startDate` 또는 `endDate`가 `undefined` | "startDate and endDate are required" |
| 빈 문자열 | 입력이 `""` | "startDate and endDate cannot be empty strings" |
| 잘못된 타입 | Date나 string이 아닌 타입 | "startDate and endDate must be Date objects or ISO 8601 strings" |
| 잘못된 날짜 | 유효하지 않은 Date (예: Invalid Date) | "Invalid date format provided" |
| 존재하지 않는 날짜 | "2023-02-30" 같은 날짜 | "Invalid date: date does not exist in calendar" |
| 역순 날짜 | `startDate > endDate` | "startDate must be before or equal to endDate" |

## 6. 유효성 검증 규칙

### 6.1 기본 규칙
1. **동일 날짜**: 시작일과 종료일이 같으면 유효 (`startDate === endDate`)
2. **정상 범위**: 시작일이 종료일보다 이전이면 유효 (`startDate < endDate`)
3. **역순**: 시작일이 종료일보다 이후이면 무효 (`startDate > endDate`)

### 6.2 특수 케이스

#### 6.2.1 최소 기간 (0일 - 1일)
- **0일** (같은 날짜): 유효
- **1일 차이**: 유효
- **예시**: 
  - `("2024-01-01", "2024-01-01")` → 유효
  - `("2024-01-01", "2024-01-02")` → 유효

#### 6.2.2 장기간 (100년 이상)
- **100년 이상 차이**: 유효하나 경고 메시지 포함
- **36,500일 (약 100년) 초과 시**: `warning` 필드 추가
- **예시**: `("1900-01-01", "2024-01-01")` → 유효 + 경고

#### 6.2.3 윤년
- 윤년 날짜는 정상 처리
- **예시**: `("2024-02-29", "2024-03-01")` → 유효

#### 6.2.4 극단적 날짜
- **과거 날짜**: 1900-01-01 이후 지원 (JavaScript Date 제한)
- **미래 날짜**: 제한 없음
- **1900년 이전**: "Dates before 1900-01-01 are not supported" 에러

## 7. 테스트 케이스 예시

### 7.1 정상 케이스
```typescript
validateDateRange("2024-01-01", "2024-12-31")
// { isValid: true }

validateDateRange(new Date("2024-01-01"), new Date("2024-01-01"))
// { isValid: true }
```

### 7.2 경고 케이스
```typescript
validateDateRange("1900-01-01", "2024-01-01")
// { isValid: true, warning: "Date range exceeds 100 years..." }
```

### 7.3 에러 케이스
```typescript
validateDateRange(null, "2024-01-01")
// { isValid: false, error: "startDate and endDate cannot be null" }

validateDateRange("2024-12-31", "2024-01-01")
// { isValid: false, error: "startDate must be before or equal to endDate" }

validateDateRange("invalid", "2024-01-01")
// { isValid: false, error: "Invalid date format provided" }
```

## 8. 비기능 요구사항
- **성능**: 단일 검증은 1ms 이내 완료
- **불변성**: 입력된 Date 객체를 수정하지 않음
- **타입 안정성**: TypeScript strict mode 호환

---

이 개선된 명세는 모호성을 제거하고, 누락된 엣지 케이스를 추가하며, 구체적인 에러 메시지와 반환 형식을 명시하여 테스트 가능성과 일관성을 향상시켰습니다.

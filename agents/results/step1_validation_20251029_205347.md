요구사항 명세를 검토하겠습니다.

## 검증 결과

### 명확성
- **평가: 개선 필요**
- **의견:**
  - ISO 8601 문자열의 정확한 형식이 명시되지 않음 (날짜만? 시간 포함?)
  - "잘못된 날짜 형식"의 구체적인 범위가 불분명 (예: "2023-02-30", "invalid-date" 등)
  - "경고 메시지"의 구체적인 내용과 전달 방식이 명시되지 않음
  - 에러 메시지(`error` 필드)의 구체적인 내용이 명시되지 않음

### 완전성
- **평가: 개선 필요**
- **의견:**
  - 누락된 엣지 케이스:
    - 타임존 처리 방법 (Date 객체와 ISO 문자열 혼용 시)
    - Invalid Date 객체 입력 시 처리
    - 빈 문자열 입력 시 처리
    - 숫자(timestamp) 입력 시 처리 여부
    - 미래/과거 날짜 제한 여부
  - 100년 기준의 근거와 정확한 일수 계산 방법 미명시

### 테스트 가능성
- **평가: 통과**
- **의견:**
  - 입력/출력 형식이 명확하게 정의됨
  - 성공/실패 케이스가 구분되어 있음
  - 엣지 케이스가 일부 명시됨
  - 다만, 에러 메시지의 정확한 텍스트가 없어 완전한 테스트는 어려움

### 일관성
- **평가: 개선 필요**
- **의견:**
  - 충돌 발견:
    - "시작일과 종료일이 같으면 유효"(요구사항 1) vs "같은 날짜: 유효"(요구사항 5) - 중복
    - "시작일이 종료일보다 이후인 경우 에러"(요구사항 4) vs "무효한 경우"(요구사항 3) - 에러 메시지 포맷 불명확
  - 100년 이상 차이 시 "유효"이면서 "경고"를 반환하는 것이 요구사항 3의 반환 형식과 불일치

---

## 개선된 명세

# 날짜 범위 검증 함수 명세 v2.0

## 기능 설명
두 날짜 사이의 기간이 유효한지 검증하는 함수를 구현합니다.

## 함수 시그니처
```typescript
function validateDateRange(
  startDate: Date | string,
  endDate: Date | string
): DateRangeValidationResult
```

## 요구사항

### 1. 입력 파라미터

#### `startDate`
- **허용 타입:**
  - `Date` 객체 (유효한 날짜)
  - ISO 8601 형식 문자열 (`YYYY-MM-DD` 또는 `YYYY-MM-DDTHH:mm:ss.sssZ`)
- **예시:** `new Date('2024-01-01')`, `"2024-01-01"`, `"2024-01-01T00:00:00.000Z"`

#### `endDate`
- **허용 타입:** `startDate`와 동일

### 2. 출력 형식

```typescript
type DateRangeValidationResult = {
  isValid: boolean;
  error?: string;
  warning?: string;
}
```

#### 유효한 경우
```json
{
  "isValid": true
}
```

#### 유효하지만 경고가 있는 경우 (100년 이상 차이)
```json
{
  "isValid": true,
  "warning": "Date range exceeds 100 years (36500 days)"
}
```

#### 무효한 경우
```json
{
  "isValid": false,
  "error": "에러 메시지"
}
```

### 3. 검증 규칙

#### 3.1 유효성 기준
- ✅ **유효:** `startDate <= endDate` (같은 날짜 포함)
- ❌ **무효:** `startDate > endDate`

#### 3.2 날짜 비교 방법
- Date 객체로 변환 후 `getTime()` 메서드를 사용하여 밀리초 단위로 비교
- 타임존: 모든 날짜는 UTC 기준으로 정규화하여 비교

### 4. 에러 처리

각 에러 케이스에 대한 정확한 에러 메시지:

| 케이스 | 에러 메시지 |
|--------|-------------|
| `startDate`가 `null` | `"startDate is required"` |
| `startDate`가 `undefined` | `"startDate is required"` |
| `endDate`가 `null` | `"endDate is required"` |
| `endDate`가 `undefined` | `"endDate is required"` |
| `startDate`가 빈 문자열 | `"startDate cannot be empty"` |
| `endDate`가 빈 문자열 | `"endDate cannot be empty"` |
| `startDate`가 잘못된 형식 | `"startDate is invalid"` |
| `endDate`가 잘못된 형식 | `"endDate is invalid"` |
| `startDate`가 Invalid Date | `"startDate is invalid"` |
| `endDate`가 Invalid Date | `"endDate is invalid"` |
| `startDate > endDate` | `"startDate must not be after endDate"` |

**잘못된 형식의 예:**
- `"invalid-date"`
- `"2023-02-30"` (존재하지 않는 날짜)
- `"2023/01/01"` (ISO 8601이 아님)
- `"not a date"`
- 숫자 타입 (명시적으로 허용하지 않음)

### 5. 엣지 케이스

| 케이스 | 입력 예시 | 결과 | 비고 |
|--------|-----------|------|------|
| 같은 날짜 | `("2024-01-01", "2024-01-01")` | `{ isValid: true }` | 1일 단위 이벤트 등에 사용 |
| 1일 차이 | `("2024-01-01", "2024-01-02")` | `{ isValid: true }` | - |
| 100년 정확히 | `("1924-01-01", "2024-01-01")` | `{ isValid: true }` | 경고 없음 |
| 100년 + 1일 | `("1924-01-01", "2024-01-02")` | `{ isValid: true, warning: "..." }` | 36500일 초과 시 경고 |
| Date와 문자열 혼용 | `(new Date("2024-01-01"), "2024-12-31")` | `{ isValid: true }` | 타입 혼용 허용 |
| 타임존이 다른 문자열 | `("2024-01-01T23:00:00+09:00", "2024-01-02T01:00:00+02:00")` | UTC로 정규화 후 비교 | - |
| 윤년 경계 | `("2024-02-29", "2024-03-01")` | `{ isValid: true }` | 유효한 날짜 |

### 6. 비기능 요구사항

- **성능:** 단일 검증은 1ms 이내 완료
- **불변성:** 입력받은 Date 객체를 수정하지 않음
- **순수 함수:** 동일 입력에 대해 항상 동일 출력

### 7. 테스트 체크리스트

#### 필수 테스트 케이스
- [ ] 유효한 날짜 범위 (시작 < 종료)
- [ ] 유효한 날짜 범위 (시작 = 종료)
- [ ] 무효한 날짜 범위 (시작 > 종료)
- [ ] null/undefined 입력
- [ ] 빈 문자열 입력
- [ ] 잘못된 날짜 형식
- [ ] Invalid Date 객체
- [ ] Date 객체와 문자열 혼용
- [ ] 100년 이상 차이
- [ ] 타임존이 다른 입력

---

**주요 개선 사항:**
1. TypeScript 타입 정의 추가로 명확성 향상
2. 에러 메시지 표준화 및 모든 케이스 명시
3. 타임존 처리 방법 명확화 (UTC 정규화)
4. 100년 기준을 36500일로 구체화
5. 경고 메시지 형식 추가 (`warning` 필드)
6. 테스트 체크리스트 제공
7. 비기능 요구사항 추가 (성능, 불변성)
8. 허용/불허용 입력 형식 명확히 구분

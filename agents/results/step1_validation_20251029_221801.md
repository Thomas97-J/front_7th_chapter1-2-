날짜 범위 검증 함수 명세를 검토하겠습니다.

## 검증 결과

### 명확성
- **평가**: 개선 필요
- **의견**: 
  - "유효한지 검증"이라는 표현이 다소 모호합니다. "시작일이 종료일 이전 또는 같은 경우"로 명확히 정의되어야 합니다.
  - "100년 이상 차이: 유효 (경고 메시지)"에서 경고 메시지의 형태와 반환 구조가 불명확합니다. 출력 형식에는 경고에 대한 언급이 없습니다.
  - ISO 8601 문자열의 정확한 형식(예: 타임존 포함 여부, 날짜만/시간 포함)이 명시되지 않았습니다.
  - "잘못된 날짜 형식"의 구체적인 예시가 없습니다.

### 완전성
- **평가**: 개선 필요
- **의견**:
  - **누락된 시나리오**:
    - Date 객체가 Invalid Date인 경우 처리
    - 빈 문자열('') 입력 처리
    - 숫자(타임스탬프) 입력 처리 여부
    - 타임존이 다른 날짜의 비교 방식
  - **에러 메시지 내용**: error 필드에 어떤 메시지가 들어가는지 구체적인 예시 필요
  - **경고 메시지**: 100년 이상 차이의 경우 반환 형식이 출력 형식과 맞지 않음

### 테스트 가능성
- **평가**: 통과 (부분적)
- **의견**:
  - 기본적인 조건은 테스트 가능합니다.
  - 하지만 "잘못된 날짜 형식"의 구체적인 예시가 없어 경계 조건 테스트가 어렵습니다.
  - 경고 메시지의 검증 방법이 불명확합니다.
  - 성공/실패 조건은 명확하나, 에러 메시지의 정확한 내용이 명시되지 않아 완전한 테스트가 어렵습니다.

### 일관성
- **평가**: 개선 필요
- **의견**:
  - **출력 형식 불일치**: 
    - 섹션 3에서는 `{ isValid: true }` 또는 `{ isValid: false, error: string }` 형태
    - 섹션 5에서는 "100년 이상 차이: 유효 (경고 메시지)"라고 했으나, 이 경우의 반환 형식이 명시되지 않음
    - 경고를 포함하려면 `{ isValid: true, warning?: string }` 같은 형식이 필요
  - **날짜 비교 기준 불명확**: 날짜만 비교할지, 시간까지 포함할지 명시 필요

---

## 개선된 명세

# 날짜 범위 검증 함수 명세

## 기능 설명
두 날짜(시작일, 종료일)를 입력받아 시작일이 종료일 이전이거나 같은지 검증합니다.

## 함수 시그니처
```typescript
function validateDateRange(
  startDate: Date | string,
  endDate: Date | string
): DateRangeValidationResult
```

## 요구사항

### 1. 입력 형식
- **`startDate`**: Date 객체 또는 ISO 8601 날짜 문자열
  - Date 객체: 유효한 Date 인스턴스
  - 문자열: ISO 8601 형식 (예: `2024-01-15`, `2024-01-15T10:30:00Z`)
  
- **`endDate`**: Date 객체 또는 ISO 8601 날짜 문자열
  - Date 객체: 유효한 Date 인스턴스
  - 문자열: ISO 8601 형식 (예: `2024-12-31`, `2024-12-31T23:59:59Z`)

### 2. 출력 형식
```typescript
type DateRangeValidationResult = {
  isValid: boolean;
  error?: string;
  warning?: string;
}
```

- **성공 케이스**: `{ isValid: true }`
- **경고 포함 성공**: `{ isValid: true, warning: "날짜 범위가 100년을 초과합니다" }`
- **실패 케이스**: `{ isValid: false, error: "에러 메시지" }`

### 3. 검증 규칙

#### 3.1 유효성 조건
- 시작일 ≤ 종료일인 경우: **유효**
- 시작일 > 종료일인 경우: **무효**

#### 3.2 날짜 비교 방식
- 밀리초 단위까지 정확히 비교
- 타임존은 Date 객체나 ISO 8601 문자열에 포함된 정보를 그대로 사용
- 문자열 입력 시 Date 생성자를 통해 파싱

### 4. 에러 처리

다음 경우 `{ isValid: false, error: string }` 반환:

| 상황 | error 메시지 |
|------|--------------|
| startDate가 null | "시작일이 null입니다" |
| startDate가 undefined | "시작일이 정의되지 않았습니다" |
| endDate가 null | "종료일이 null입니다" |
| endDate가 undefined | "종료일이 정의되지 않았습니다" |
| startDate가 Invalid Date | "시작일이 유효하지 않은 날짜입니다" |
| endDate가 Invalid Date | "종료일이 유효하지 않은 날짜입니다" |
| 잘못된 ISO 8601 문자열 | "날짜 형식이 올바르지 않습니다" |
| startDate > endDate | "시작일이 종료일보다 이후입니다" |
| 빈 문자열 ('') | "날짜 형식이 올바르지 않습니다" |

#### 4.1 Invalid Date 판단 기준
- `new Date(value)`의 결과가 `isNaN(date.getTime())`인 경우
- 예: `new Date('invalid')`, `new Date('2024-13-45')`

### 5. 경고 케이스

다음 경우 `{ isValid: true, warning: string }` 반환:

| 상황 | warning 메시지 |
|------|----------------|
| 종료일 - 시작일 > 100년 | "날짜 범위가 100년을 초과합니다" |

- **100년 기준**: 36,525일 (100 × 365.25일)

### 6. 엣지 케이스 명세

| 케이스 | startDate | endDate | 예상 결과 |
|--------|-----------|---------|-----------|
| 같은 날짜 | 2024-01-15 | 2024-01-15 | `{ isValid: true }` |
| 같은 날짜/시간 | 2024-01-15T10:00:00Z | 2024-01-15T10:00:00Z | `{ isValid: true }` |
| 1밀리초 차이 | 2024-01-15T10:00:00.000Z | 2024-01-15T10:00:00.001Z | `{ isValid: true }` |
| 1일 차이 | 2024-01-15 | 2024-01-16 | `{ isValid: true }` |
| 정확히 100년 | 2024-01-15 | 2124-01-15 | `{ isValid: true }` |
| 100년 초과 | 2024-01-15 | 2124-01-16 | `{ isValid: true, warning: "날짜 범위가 100년을 초과합니다" }` |
| 역순 날짜 | 2024-12-31 | 2024-01-01 | `{ isValid: false, error: "시작일이 종료일보다 이후입니다" }` |
| Date 객체 혼용 | new Date('2024-01-15') | '2024-12-31' | `{ isValid: true }` |

### 7. 타입 안전성
- TypeScript 사용 시 명시적 타입 정의 제공
- 런타임에서도 타입 검증 수행

### 8. 제외 사항
- 다음은 이 함수의 책임 범위가 **아닙니다**:
  - 영업일(business day) 계산
  - 특정 국가/지역의 공휴일 고려
  - 날짜 형식 변환 (ISO 8601 외 형식)
  - 타임스탬프(숫자) 입력 지원

---

이 개선된 명세는 모호성을 제거하고, 모든 엣지 케이스를 명시하며, 테스트 가능한 구체적인 조건들을 포함합니다.

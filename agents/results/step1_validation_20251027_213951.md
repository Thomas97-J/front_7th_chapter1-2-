요구사항 명세를 검증하겠습니다.

## 검증 결과

### 명확성
- **평가**: 개선 필요
- **의견**: 
  - "시작일이 종료일보다 이전"과 "같으면 유효"라는 조건이 분리되어 있으나, 실제로는 "시작일 ≤ 종료일"로 통합 가능
  - ISO 8601 문자열의 정확한 형식이 명시되지 않음 (예: 'YYYY-MM-DD', 'YYYY-MM-DDTHH:mm:ss.sssZ' 등)
  - "경고 메시지"가 어디에 포함되는지 불명확 (반환값의 구조에 명시되지 않음)
  - "잘못된 날짜 형식"의 구체적인 예시가 없음

### 완전성
- **평가**: 개선 필요
- **의견**:
  - 타임존 처리 방식이 명시되지 않음 (UTC? Local? 타임존 차이 고려?)
  - Date 객체가 Invalid Date인 경우 처리가 명시되지 않음
  - 빈 문자열 입력 케이스가 누락됨
  - 숫자(timestamp) 입력 허용 여부가 명시되지 않음
  - 100년 이상 차이 시 "경고 메시지"의 구체적인 내용과 반환 형태가 불명확
  - 음수 날짜(기원전) 또는 매우 먼 미래 날짜 처리가 명시되지 않음

### 테스트 가능성
- **평가**: 개선 필요
- **의견**:
  - 에러 메시지의 구체적인 내용이 명시되지 않아 테스트 작성 시 검증 기준이 모호함
  - "경고 메시지"가 `error` 필드에 포함되는지, 별도 필드인지 불명확
  - 100년 기준이 정확히 "36500일" 같은 구체적 수치로 정의되지 않음
  - 각 에러 케이스별 예상되는 정확한 에러 메시지가 없음

### 일관성
- **평가**: 개선 필요
- **의견**:
  - "같은 날짜: 유효"는 기본 동작에 이미 명시되어 있어 엣지 케이스에 중복됨
  - 100년 이상 차이가 "유효"하지만 "경고"를 발생시킨다는 것이 반환 타입 정의와 충돌 (`isValid: true`이면서 경고?)
  - 에러 처리 섹션과 출력 섹션의 관계가 불명확 (에러 시 항상 `isValid: false`인지?)

---

## 개선된 명세

# 날짜 범위 검증 함수 명세

## 1. 기능 개요
두 날짜 간의 기간이 유효한지 검증하는 순수 함수를 구현합니다. 시작일이 종료일보다 이전이거나 같으면 유효한 것으로 판단합니다.

## 2. 함수 시그니처
```typescript
function validateDateRange(
  startDate: Date | string,
  endDate: Date | string
): DateRangeValidationResult

interface DateRangeValidationResult {
  isValid: boolean;
  error?: string;
  warning?: string;
}
```

## 3. 입력 명세

### 3.1 허용되는 입력 형식
- **Date 객체**: JavaScript Date 인스턴스
- **ISO 8601 문자열**: 다음 형식을 지원
  - `YYYY-MM-DD` (예: '2024-01-15')
  - `YYYY-MM-DDTHH:mm:ss` (예: '2024-01-15T14:30:00')
  - `YYYY-MM-DDTHH:mm:ss.sssZ` (예: '2024-01-15T14:30:00.000Z')

### 3.2 타임존 처리
- 모든 날짜는 UTC 기준으로 처리됩니다
- 타임존 정보가 없는 경우 UTC로 간주합니다
- 시간 정보가 없는 경우 (예: 'YYYY-MM-DD') 해당 날짜의 00:00:00 UTC로 처리됩니다

## 4. 출력 명세

### 4.1 유효한 경우
```typescript
{
  isValid: true
}
```

### 4.2 유효하지만 경고가 있는 경우
```typescript
{
  isValid: true,
  warning: "날짜 범위가 100년 이상입니다. 의도한 입력인지 확인해주세요."
}
```
- 조건: 시작일과 종료일의 차이가 36,525일 (100년) 이상인 경우

### 4.3 무효한 경우
```typescript
{
  isValid: false,
  error: string // 구체적인 에러 메시지 (아래 5.3 참조)
}
```

## 5. 검증 로직

### 5.1 유효 조건
- 시작일(startDate) ≤ 종료일(endDate)
- 두 날짜 모두 유효한 Date 객체로 변환 가능
- 날짜가 유효한 범위 내 (1900-01-01 ~ 2100-12-31)

### 5.2 무효 조건
- 시작일 > 종료일

### 5.3 에러 처리 및 에러 메시지

| 에러 상황 | `error` 메시지 | `isValid` |
|---------|--------------|-----------|
| `null` 입력 | "시작일과 종료일은 필수입니다." | `false` |
| `undefined` 입력 | "시작일과 종료일은 필수입니다." | `false` |
| 빈 문자열 입력 | "유효하지 않은 날짜 형식입니다." | `false` |
| Invalid Date | "유효하지 않은 날짜입니다." | `false` |
| 지원하지 않는 문자열 형식 | "지원하지 않는 날짜 형식입니다. ISO 8601 형식을 사용해주세요." | `false` |
| 범위 밖 날짜 (1900 이전, 2100 이후) | "날짜는 1900-01-01부터 2100-12-31 사이여야 합니다." | `false` |
| 시작일 > 종료일 | "시작일은 종료일보다 이후일 수 없습니다." | `false` |

## 6. 엣지 케이스

| 케이스 | 입력 예시 | 예상 결과 | 비고 |
|--------|----------|----------|------|
| 같은 날짜 | startDate='2024-01-15', endDate='2024-01-15' | `{ isValid: true }` | 1일 예약 등의 경우 유효 |
| 1일 차이 | startDate='2024-01-15', endDate='2024-01-16' | `{ isValid: true }` | |
| 100년 정확히 | startDate='1924-01-15', endDate='2024-01-15' | `{ isValid: true, warning: "..." }` | 경고 발생 |
| 100년 + 1일 | startDate='1924-01-14', endDate='2024-01-15' | `{ isValid: true, warning: "..." }` | 경고 발생 |
| 윤년 경계 | startDate='2024-02-29', endDate='2024-03-01' | `{ isValid: true }` | 윤년 날짜 처리 |
| 시간 포함 (같은 날) | startDate='2024-01-15T23:59:59Z', endDate='2024-01-15T00:00:00Z' | `{ isValid: false, error: "시작일은 종료일보다 이후일 수 없습니다." }` | 시간까지 비교 |
| Date 객체 혼용 | startDate=new Date('2024-01-15'), endDate='2024-01-16' | `{ isValid: true }` | 혼용 가능 |

## 7. 구현 요구사항

### 7.1 기술적 제약
- 외부 라이브러리 사용 금지 (순수 JavaScript/TypeScript로 구현)
- 부수 효과(side effect) 없는 순수 함수로 구현
- 입력 파라미터를 변경하지 않음 (immutable)

### 7.2 성능 요구사항
- 단일 검증 실행 시간: 1ms 이하

### 7.3 코드 품질
- TypeScript strict mode 통과
- 모든 브랜치에 대한 단위 테스트 커버리지 100%
- JSDoc 주석 포함

## 8. 테스트 케이스 요약

구현 시 다음 테스트 케이스를 모두 통과해야 합니다:

1. **정상 케이스** (6개)
   - 시작일 < 종료일
   - 시작일 = 종료일
   - Date 객체 입력
   - ISO 8601 문자열 입력 (3가지 형식)
   
2. **에러 케이스** (7개)
   - null/undefined 입력
   - 빈 문자열
   - Invalid Date
   - 지원하지 않는 형식
   - 범위 밖 날짜
   - 시작일 > 종료일

3. **경고 케이스** (2개)
   - 정확히 100년
   - 100년 이상

4. **엣지 케이스** (4개)
   - 윤년 처리
   - 시간 포함 비교
   - 혼용 입력
   - 경계값

**총 19개 테스트 케이스**

---

## 개선 사항 요약

1. **타임존 명확화**: UTC 기준 명시
2. **반환 타입 정의**: `warning` 필드 추가
3. **에러 메시지 구체화**: 각 케이스별 정확한 메시지 정의
4. **입력 형식 명확화**: ISO 8601 세부 형식 명시
5. **날짜 범위 제한**: 1900-2100 범위 추가
6. **엣지 케이스 확장**: 윤년, 시간 포함 비교 등 추가
7. **테스트 케이스 정량화**: 19개 구체적 테스트 케이스 제공
8. **구현 제약사항 추가**: 성능, 코드 품질 기준 명시

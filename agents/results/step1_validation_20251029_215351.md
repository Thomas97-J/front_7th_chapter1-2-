요구사항 명세를 검토하겠습니다.

## 검증 결과

### 명확성
- **평가**: 개선 필요
- **의견**: 
  - "ISO 8601 문자열"의 정확한 포맷이 명시되지 않음 (예: `2024-01-01`, `2024-01-01T00:00:00Z` 등 다양한 형식 존재)
  - "잘못된 날짜 형식"의 구체적인 예시가 없음
  - "경고 메시지"의 포맷과 전달 방법이 불명확함 (반환값에 포함되는지, 콘솔 출력인지 등)
  - 에러 메시지(`error: string`)의 구체적인 내용이 명시되지 않음

### 완전성
- **평가**: 개선 필요
- **의견**:
  - 타임존 처리 방식이 명시되지 않음 (중요한 엣지 케이스)
  - Invalid Date 객체 처리 방식 누락 (예: `new Date('invalid')`)
  - 빈 문자열 입력 케이스 누락
  - 숫자(타임스탬프) 입력 허용 여부 불명확
  - 100년 경고 기준의 정확한 임계값 미명시 (100년 초과? 이상?)
  - 과거/미래 날짜에 대한 제한 여부 불명확
  - 시간 정보 처리 방식 누락 (날짜만 비교? 시간까지 비교?)

### 테스트 가능성
- **평가**: 개선 필요
- **의견**:
  - 각 에러 케이스별 정확한 에러 메시지가 명시되지 않아 테스트 어려움
  - "100년 이상 차이" 시 반환 형태가 불명확 (`isValid: true` + 경고? 별도 필드?)
  - 경계값(100년 정확히)에 대한 동작 미정의
  - 성공/실패 케이스별 예상 출력값 예시 부족

### 일관성
- **평가**: 개선 필요
- **의견**:
  - 요구사항 3과 5가 충돌: "100년 이상 차이"가 유효하면서 경고를 발생시키는데, 출력 형식에 경고를 담을 필드가 없음
  - "같은 날짜"가 기본 동작과 엣지 케이스에 중복 명시됨
  - 에러 처리(요구사항 4)와 출력 형식(요구사항 3)의 관계가 명확하지 않음

---

## 개선된 명세

# 예제 기능 명세: 날짜 범위 검증 함수

## 기능 설명
두 날짜 사이의 기간이 유효한지 검증하는 함수를 구현합니다. 시작일이 종료일보다 이전이거나 같으면 유효한 범위로 판단합니다.

## 함수 시그니처
```typescript
function validateDateRange(
  startDate: Date | string,
  endDate: Date | string
): ValidationResult

type ValidationResult = 
  | { isValid: true; warning?: string }
  | { isValid: false; error: string }
```

## 요구사항

### 1. 입력 형식
- **Date 객체**: JavaScript Date 인스턴스
- **ISO 8601 문자열**: 다음 형식을 지원
  - 날짜만: `YYYY-MM-DD` (예: `2024-01-01`)
  - 날짜+시간: `YYYY-MM-DDTHH:mm:ss.sssZ` (예: `2024-01-01T00:00:00.000Z`)
  - 날짜+시간(타임존): `YYYY-MM-DDTHH:mm:ss.sss+HH:mm` (예: `2024-01-01T09:00:00.000+09:00`)
- **타임존 처리**: 모든 날짜는 UTC 기준으로 변환하여 비교

### 2. 유효성 검증 규칙
- **유효한 경우**: 시작일 ≤ 종료일
- **무효한 경우**: 시작일 > 종료일
- **비교 방식**: 밀리초 단위까지 비교

### 3. 출력 형식

#### 3.1 성공 케이스
```typescript
// 일반적인 유효 범위
{ isValid: true }

// 100년 초과 범위 (36525일 초과)
{ 
  isValid: true, 
  warning: "Date range exceeds 100 years" 
}
```

#### 3.2 실패 케이스
```typescript
// null 또는 undefined 입력
{ 
  isValid: false, 
  error: "Start date and end date are required" 
}

// Invalid Date (잘못된 형식)
{ 
  isValid: false, 
  error: "Invalid date format" 
}

// 시작일 > 종료일
{ 
  isValid: false, 
  error: "Start date must be before or equal to end date" 
}
```

### 4. 에러 처리 상세

#### 4.1 null/undefined 검증 (우선순위 1)
- `startDate === null || startDate === undefined`
- `endDate === null || endDate === undefined`
- 에러 메시지: `"Start date and end date are required"`

#### 4.2 날짜 형식 검증 (우선순위 2)
다음 입력을 Invalid Date로 간주:
- 빈 문자열: `""`
- 잘못된 문자열: `"invalid"`, `"2024-13-01"`, `"2024-02-30"`
- Date 객체이지만 Invalid: `new Date('invalid')`
- 에러 메시지: `"Invalid date format"`

#### 4.3 범위 검증 (우선순위 3)
- 조건: `startDate > endDate`
- 에러 메시지: `"Start date must be before or equal to end date"`

### 5. 엣지 케이스

#### 5.1 동일 날짜
- 입력: `startDate === endDate` (밀리초까지 동일)
- 출력: `{ isValid: true }`

#### 5.2 최소 유효 범위
- 입력: 1밀리초 차이
- 출력: `{ isValid: true }`

#### 5.3 장기간 범위
- 입력: 100년 초과 (36525일 초과)
- 출력: `{ isValid: true, warning: "Date range exceeds 100 years" }`
- 정확히 100년(36525일): 경고 없음

#### 5.4 극단적 날짜
- 유효한 JavaScript Date 범위: `-271821-04-20` ~ `275760-09-13`
- 범위 내 모든 날짜 지원
- 범위 밖: `"Invalid date format"` 에러

### 6. 동작 예시

```typescript
// 유효한 범위
validateDateRange('2024-01-01', '2024-12-31')
// => { isValid: true }

// 동일 날짜
validateDateRange('2024-01-01', '2024-01-01')
// => { isValid: true }

// 무효한 범위
validateDateRange('2024-12-31', '2024-01-01')
// => { isValid: false, error: "Start date must be before or equal to end date" }

// null 입력
validateDateRange(null, '2024-01-01')
// => { isValid: false, error: "Start date and end date are required" }

// Invalid Date
validateDateRange('invalid', '2024-01-01')
// => { isValid: false, error: "Invalid date format" }

// 100년 초과
validateDateRange('1900-01-01', '2024-01-01')
// => { isValid: true, warning: "Date range exceeds 100 years" }

// Date 객체 사용
validateDateRange(new Date('2024-01-01'), new Date('2024-12-31'))
// => { isValid: true }
```

## 구현 제약사항
- 외부 라이브러리 사용 금지 (순수 JavaScript/TypeScript)
- 불변성 유지: 입력된 Date 객체 수정 금지
- 타입 안전성: TypeScript strict 모드 준수

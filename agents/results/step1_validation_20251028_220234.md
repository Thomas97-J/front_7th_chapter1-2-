제공하신 날짜 범위 검증 함수 명세를 검토하여 검증 결과를 제공하겠습니다.

## 검증 결과

### 명확성
- **평가**: 개선 필요
- **의견**:
  - "시작일이 종료일보다 이전이면 유효" vs "시작일이 종료일보다 이후인 경우 에러"는 명확하지만, "같은 날짜: 유효"와의 관계가 기본 동작에 이미 명시되어 중복됨
  - "경고 메시지"의 구체적인 내용과 형식이 명시되지 않음 (출력 형식과 불일치)
  - ISO 8601 문자열의 구체적인 형식 (날짜만? 시간 포함? 타임존?)이 불명확
  - "잘못된 날짜 형식"의 범위가 모호함 (예: "2023-13-01", "invalid" 등)

### 완전성
- **평가**: 개선 필요
- **의견**:
  - 타임존 처리 방식이 명시되지 않음 (중요한 날짜 비교 요소)
  - 윤년, 서머타임 등 특수한 날짜 처리가 언급되지 않음
  - 100년 이상 차이에 대한 "경고 메시지"가 출력 형식(isValid: true/false)과 어떻게 조합되는지 불명확
  - 음수 연도, 미래의 먼 날짜 등 극단적 케이스 미포함
  - 입력이 배열이나 객체 등 예상하지 못한 타입일 경우 처리 방식 누락

### 테스트 가능성
- **평가**: 개선 필요
- **의견**:
  - 에러 메시지의 구체적인 문구가 명시되지 않아 테스트 작성 시 기대값 불명확
  - "100년 이상 차이"의 경고 메시지가 반환값 구조와 어떻게 결합되는지 명시 필요
  - "1일 차이"는 테스트 가능하지만 다른 일반적인 유효 케이스 예시 부족
  - Date 객체와 ISO 8601 문자열이 혼용될 때의 동작 미명시

### 일관성
- **평가**: 개선 필요
- **의견**:
  - 출력 형식이 `{ isValid: true }` 또는 `{ isValid: false, error: string }`로 명시되었으나, "경고 메시지"를 어떻게 표현할지 불일치
  - "같은 날짜: 유효"가 기본 동작과 엣지 케이스 양쪽에 중복 기술됨
  - 에러 처리 섹션과 엣지 케이스 섹션의 경계가 모호함

---

## 개선된 명세

# 예제 기능 명세: 날짜 범위 검증 함수

## 기능 설명
두 날짜 사이의 기간이 유효한지 검증하는 함수를 구현합니다. 시작일이 종료일보다 이전이거나 같으면 유효한 날짜 범위로 판단합니다.

## 함수 시그니처
```typescript
function validateDateRange(
  startDate: Date | string,
  endDate: Date | string
): ValidationResult

interface ValidationResult {
  isValid: boolean;
  error?: string;
  warning?: string;
}
```

## 요구사항

### 1. 입력 형식
- **Date 객체**: JavaScript Date 인스턴스
- **ISO 8601 문자열**: 다음 형식을 지원
  - 날짜만: `YYYY-MM-DD` (예: "2024-01-15")
  - 날짜와 시간: `YYYY-MM-DDTHH:mm:ss` (예: "2024-01-15T14:30:00")
  - 타임존 포함: `YYYY-MM-DDTHH:mm:ss.sssZ` 또는 `YYYY-MM-DDTHH:mm:ss+HH:mm`

### 2. 입력 검증
다음 경우 `{ isValid: false, error: string }`을 반환합니다:

| 케이스 | 에러 메시지 |
|--------|------------|
| startDate가 null 또는 undefined | "시작일은 필수 입력값입니다." |
| endDate가 null 또는 undefined | "종료일은 필수 입력값입니다." |
| startDate가 유효하지 않은 Date 객체 (Invalid Date) | "시작일이 유효한 날짜 형식이 아닙니다." |
| endDate가 유효하지 않은 Date 객체 (Invalid Date) | "종료일이 유효한 날짜 형식이 아닙니다." |
| startDate가 문자열이지만 ISO 8601 형식이 아님 | "시작일이 유효한 날짜 형식이 아닙니다." |
| endDate가 문자열이지만 ISO 8601 형식이 아님 | "종료일이 유효한 날짜 형식이 아닙니다." |
| startDate가 Date나 string 타입이 아님 | "시작일은 Date 객체 또는 ISO 8601 문자열이어야 합니다." |
| endDate가 Date나 string 타입이 아님 | "종료일은 Date 객체 또는 ISO 8601 문자열이어야 합니다." |

### 3. 유효성 검증
입력이 모두 유효한 날짜인 경우:

- **유효한 범위** (startDate ≤ endDate):
  - 반환: `{ isValid: true }`
  - 단, 날짜 차이가 36,500일(약 100년) 이상인 경우:
    - 반환: `{ isValid: true, warning: "날짜 범위가 100년을 초과합니다. 의도한 입력인지 확인하세요." }`

- **무효한 범위** (startDate > endDate):
  - 반환: `{ isValid: false, error: "시작일은 종료일보다 이전이거나 같아야 합니다." }`

### 4. 날짜 비교 규칙
- Date 객체와 문자열이 혼용되는 경우, 모두 Date 객체로 변환 후 비교
- 시간 정보가 포함된 경우, 밀리초 단위까지 비교
- 시간 정보가 없는 경우(날짜만 있는 경우), 자정(00:00:00.000 UTC)으로 간주
- 타임존이 명시되지 않은 경우, 로컬 타임존으로 해석

### 5. 엣지 케이스

| 케이스 | 예시 | 결과 |
|--------|------|------|
| 같은 날짜 | start: "2024-01-01", end: "2024-01-01" | `{ isValid: true }` |
| 1밀리초 차이 | start: "2024-01-01T00:00:00.000Z", end: "2024-01-01T00:00:00.001Z" | `{ isValid: true }` |
| 1일 차이 | start: "2024-01-01", end: "2024-01-02" | `{ isValid: true }` |
| 윤년 날짜 | start: "2024-02-29", end: "2024-03-01" | `{ isValid: true }` |
| 100년 정확히 | start: "1924-01-01", end: "2024-01-01" | `{ isValid: true }` |
| 100년 초과 | start: "1924-01-01", end: "2024-01-02" | `{ isValid: true, warning: "날짜 범위가 100년을 초과합니다. 의도한 입력인지 확인하세요." }` |
| 유효하지 않은 날짜 문자열 | start: "2024-13-01", end: "2024-12-31" | `{ isValid: false, error: "시작일이 유효한 날짜 형식이 아닙니다." }` |
| 극단적 과거 날짜 | start: "0001-01-01", end: "2024-01-01" | `{ isValid: true, warning: "날짜 범위가 100년을 초과합니다. 의도한 입력인지 확인하세요." }` |
| Date와 string 혼용 | start: new Date("2024-01-01"), end: "2024-12-31" | `{ isValid: true }` |

### 6. 성능 요구사항
- 단일 호출 처리 시간: 10ms 이하
- 메모리 사용: 추가 객체 생성 최소화

### 7. 예외 사항
다음 경우는 지원하지 않으며, 유효하지 않은 입력으로 처리합니다:
- 상대적 날짜 표현 ("yesterday", "next week" 등)
- Unix 타임스탬프 (숫자로 전달되는 경우)
- 다른 날짜 형식 ("MM/DD/YYYY", "DD-MM-YYYY" 등)

---

## 테스트 시나리오 예시

```typescript
// 정상 케이스
validateDateRange("2024-01-01", "2024-12-31")
// → { isValid: true }

// 같은 날짜
validateDateRange("2024-06-15", "2024-06-15")
// → { isValid: true }

// 역순
validateDateRange("2024-12-31", "2024-01-01")
// → { isValid: false, error: "시작일은 종료일보다 이전이거나 같아야 합니다." }

// null 입력
validateDateRange(null, "2024-12-31")
// → { isValid: false, error: "시작일은 필수 입력값입니다." }

// 100년 초과
validateDateRange("1900-01-01", "2024-12-31")
// → { isValid: true, warning: "날짜 범위가 100년을 초과합니다. 의도한 입력인지 확인하세요." }

// 잘못된 형식
validateDateRange("invalid-date", "2024-12-31")
// → { isValid: false, error: "시작일이 유효한 날짜 형식이 아닙니다." }
```

---

이 개선된 명세는 모든 엣지 케이스를 명확히 정의하고, 에러 메시지를 구체화하며, 테스트 가능한 형태로 작성되었습니다.

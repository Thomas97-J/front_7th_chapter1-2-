요구사항 명세를 검증하겠습니다.

## 검증 결과

### 명확성
- **평가**: 개선 필요
- **의견**: 
  - "시작일이 종료일보다 이전이면 유효합니다"는 명확하지만, 입력 타입이 "Date 객체 또는 ISO 8601 문자열"로 두 가지인데 내부 변환 로직이 명시되지 않음
  - "잘못된 날짜 형식"의 구체적인 예시가 없음 (예: "2023-13-01", "invalid-date")
  - 100년 이상 차이 시 "경고 메시지"의 구체적인 내용과 반환 형태가 불명확 (error 필드에 포함되는지, 별도 필드인지?)

### 완전성
- **평가**: 개선 필요
- **의견**:
  - **누락된 엣지 케이스들**:
    - 타임존 처리 방식 (UTC? 로컬? ISO 문자열의 타임존은?)
    - Date 객체가 Invalid Date인 경우 (예: `new Date('invalid')`)
    - 시간 정보 처리: Date 객체는 시간도 포함하는데, 시/분/초는 무시하는지 비교하는지?
    - 음수 연도, 미래 날짜에 대한 제한 여부
  - **경고 메시지 처리**:
    - 100년 기준의 근거가 없음
    - 경고가 발생해도 isValid는 true인지 false인지 불명확

### 테스트 가능성
- **평가**: 개선 필요
- **의견**:
  - 기본적인 조건은 테스트 가능하나, 구체적인 값이 부족함
  - "잘못된 날짜 형식"에 대한 구체적인 테스트 케이스 예시 필요
  - 100년 경고 메시지의 정확한 임계값 (100년 = 36,500일? 36,525일?)
  - 에러 메시지의 정확한 문구가 명시되지 않아 스냅샷 테스트 작성 어려움

### 일관성
- **평가**: 개선 필요
- **의견**:
  - **모순 발견**: 
    - "100년 이상 차이: 유효 (경고 메시지)" vs 출력 타입 정의
    - 출력은 `{ isValid: false, error: string }` 또는 `{ isValid: true }`만 정의되어 있는데, 경고 메시지는 어디에 포함되는지 불명확
    - error 필드가 "무효한 경우"에만 존재하는지, 경고 시에도 존재하는지 모호함

---

## 개선된 명세

# 날짜 범위 검증 함수 명세

## 기능 설명
두 날짜 사이의 기간이 유효한지 검증하는 함수를 구현합니다.

## 함수 시그니처
```typescript
function validateDateRange(
  startDate: Date | string,
  endDate: Date | string
): DateRangeValidationResult
```

## 입력 파라미터

### startDate
- **타입**: `Date` 객체 또는 ISO 8601 형식 문자열
- **예시**: 
  - Date 객체: `new Date('2024-01-01')`
  - ISO 8601: `'2024-01-01T00:00:00.000Z'`, `'2024-01-01'`
- **변환 규칙**: 
  - 문자열인 경우 `new Date()` 생성자로 변환
  - 변환 후 Invalid Date인지 검증

### endDate
- **타입**: `Date` 객체 또는 ISO 8601 형식 문자열
- **조건**: startDate와 동일

## 출력 타입
```typescript
type DateRangeValidationResult = 
  | { isValid: true; warning?: string }
  | { isValid: false; error: string }
```

## 검증 규칙

### 1. 입력 유효성 검증 (우선순위 순)
| 조건 | 결과 | error 메시지 |
|------|------|--------------|
| startDate가 null/undefined | `{ isValid: false, error: "시작일이 제공되지 않았습니다" }` | |
| endDate가 null/undefined | `{ isValid: false, error: "종료일이 제공되지 않았습니다" }` | |
| startDate가 Invalid Date | `{ isValid: false, error: "시작일 형식이 올바르지 않습니다" }` | |
| endDate가 Invalid Date | `{ isValid: false, error: "종료일 형식이 올바르지 않습니다" }` | |

**Invalid Date 예시**: `new Date('invalid')`, `new Date('2023-13-01')`, `'not-a-date'`

### 2. 날짜 비교 로직
- **비교 기준**: 날짜만 비교 (시/분/초/밀리초 무시)
- **비교 방법**: 각 Date를 UTC 기준 자정으로 정규화 후 비교
  ```typescript
  // 예시 구현
  const normalizeDate = (date: Date) => {
    return new Date(Date.UTC(
      date.getFullYear(),
      date.getMonth(),
      date.getDate()
    ))
  }
  ```

### 3. 날짜 범위 검증
| 조건 | 결과 |
|------|------|
| 시작일 > 종료일 | `{ isValid: false, error: "시작일은 종료일보다 이후일 수 없습니다" }` |
| 시작일 = 종료일 | `{ isValid: true }` |
| 시작일 < 종료일, 차이 < 100년 | `{ isValid: true }` |
| 시작일 < 종료일, 차이 ≥ 100년 | `{ isValid: true, warning: "날짜 범위가 100년 이상입니다. 의도한 입력인지 확인하세요" }` |

**100년 기준**: 정확히 36,525일 (100년 × 365.25일)

## 엣지 케이스 및 예시

### 정상 케이스
```typescript
// 같은 날짜
validateDateRange('2024-01-01', '2024-01-01')
// => { isValid: true }

// 1일 차이
validateDateRange('2024-01-01', '2024-01-02')
// => { isValid: true }

// 시간이 다른 같은 날짜 (시간 무시)
validateDateRange('2024-01-01T09:00:00Z', '2024-01-01T18:00:00Z')
// => { isValid: true }
```

### 경고 케이스
```typescript
// 100년 이상 차이
validateDateRange('1900-01-01', '2024-01-01')
// => { isValid: true, warning: "날짜 범위가 100년 이상입니다. 의도한 입력인지 확인하세요" }
```

### 에러 케이스
```typescript
// 시작일이 종료일보다 이후
validateDateRange('2024-12-31', '2024-01-01')
// => { isValid: false, error: "시작일은 종료일보다 이후일 수 없습니다" }

// null 입력
validateDateRange(null, '2024-01-01')
// => { isValid: false, error: "시작일이 제공되지 않았습니다" }

// 잘못된 형식
validateDateRange('invalid-date', '2024-01-01')
// => { isValid: false, error: "시작일 형식이 올바르지 않습니다" }

// Invalid Date 객체
validateDateRange(new Date('not-a-date'), '2024-01-01')
// => { isValid: false, error: "시작일 형식이 올바르지 않습니다" }
```

## 기술적 제약사항
- 타임존: 모든 날짜는 UTC 기준으로 정규화하여 비교
- 지원 날짜 범위: JavaScript Date가 지원하는 범위 (1970-01-01 ~ 275760-09-13)
- 연도가 0~99인 경우 자동으로 1900~1999로 변환되는 JavaScript 기본 동작 유지

## 테스트 체크리스트
- [ ] null/undefined 입력 처리
- [ ] Invalid Date 문자열 처리 (`'invalid'`, `'2023-13-01'`)
- [ ] Invalid Date 객체 처리 (`new Date('invalid')`)
- [ ] 시작일 = 종료일
- [ ] 시작일 < 종료일 (1일 차이)
- [ ] 시작일 > 종료일
- [ ] 100년 정확히 차이 (경계값)
- [ ] 100년 이상 차이
- [ ] 시간이 다른 같은 날짜
- [ ] ISO 8601 문자열과 Date 객체 혼합 사용
- [ ] 타임존이 다른 같은 날짜 (`'2024-01-01T00:00:00+09:00'` vs `'2023-12-31T15:00:00Z'`)

---

주요 개선 사항:
1. **명확성**: 타입 정의, 에러 메시지, 정규화 로직 명시
2. **완전성**: 타임존, Invalid Date, 시간 처리 방식 추가
3. **테스트 가능성**: 구체적인 입력/출력 예시와 테스트 체크리스트 제공
4. **일관성**: warning 필드를 출력 타입에 명시하여 100년 케이스 처리 방식 명확화

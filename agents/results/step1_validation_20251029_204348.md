날짜 범위 검증 함수 명세를 검토하겠습니다.

## 검증 결과

### 명확성
- **평가**: 개선 필요
- **의견**:
  - ISO 8601 문자열 형식의 구체적인 예시가 없음 (예: `2024-01-01`, `2024-01-01T00:00:00Z`)
  - "잘못된 날짜 형식"의 정의가 불명확 (예: `2024-13-45`, `invalid-date` 등 구체적 예시 필요)
  - 100년 이상 차이 시 "경고 메시지"의 구체적인 내용과 반환 형식이 명시되지 않음
  - 타임존 처리 방식이 명시되지 않음 (UTC 기준인지, 로컬 타임존인지)

### 완전성
- **평가**: 개선 필요
- **의견**:
  - 빈 문자열(`""`) 입력 케이스 누락
  - Date 객체가 Invalid Date인 경우 처리 방식 누락
  - 과거/미래 날짜에 대한 제약사항 누락 (예: 과거만 허용, 미래만 허용 등)
  - 시간 정보 포함 시 처리 방식 불명확 (날짜만 비교하는지, 시간까지 비교하는지)
  - 배열이나 숫자형 입력 등 타입 불일치 케이스 누락
  - 100년 이상 차이 시 반환 형식이 기존 출력 형식과 다를 수 있음 (경고 메시지 추가)

### 테스트 가능성
- **평가**: 개선 필요
- **의견**:
  - 에러 메시지의 구체적인 문구가 명시되지 않아 테스트 작성 시 임의로 결정해야 함
  - "100년 이상 차이" 케이스의 정확한 임계값이 불명확 (100년 정확히? 36500일? 36525일?)
  - 각 에러 케이스별 `error` 필드의 예상 값이 명시되지 않음
  - 경고 메시지 포함 시 반환 구조 예시 필요

### 일관성
- **평가**: 개선 필요
- **의견**:
  - "같은 날짜: 유효"와 "시작일과 종료일이 같으면 유효합니다"는 일관되나, 100년 이상 차이 케이스가 "유효"이면서 "경고 메시지"를 포함한다는 점이 출력 형식과 충돌 가능
  - 출력 형식에서 경고가 있는 유효한 케이스를 어떻게 표현할지 불명확 (`isValid: true`이면서 `warning` 필드 추가인지?)

---

## 개선된 명세

# 날짜 범위 검증 함수 명세

## 기능 설명
두 날짜 사이의 기간이 유효한지 검증하는 함수를 구현합니다.

## 함수 시그니처
```typescript
function validateDateRange(
  startDate: Date | string,
  endDate: Date | string
): DateRangeValidationResult

interface DateRangeValidationResult {
  isValid: boolean;
  error?: string;
  warning?: string;
}
```

## 요구사항

### 1. 기본 동작
- 시작일(`startDate`)과 종료일(`endDate`)을 입력받아 범위의 유효성을 검증합니다
- **유효 조건**: `startDate <= endDate` (시작일이 종료일보다 이전이거나 같음)
- **무효 조건**: `startDate > endDate` (시작일이 종료일보다 이후)
- 날짜 비교 시 시간 정보는 무시하고 날짜(년-월-일)만 비교합니다

### 2. 입력 형식

#### 2.1 허용되는 입력
- **Date 객체**: JavaScript Date 인스턴스
- **ISO 8601 문자열**: 
  - `YYYY-MM-DD` 형식 (예: `"2024-01-15"`)
  - `YYYY-MM-DDTHH:mm:ss.sssZ` 형식 (예: `"2024-01-15T09:30:00.000Z"`)
  - `YYYY-MM-DDTHH:mm:ss` 형식 (예: `"2024-01-15T09:30:00"`)

#### 2.2 타임존 처리
- 문자열 입력은 UTC 기준으로 파싱합니다
- Date 객체는 로컬 타임존을 유지합니다
- 비교 시 날짜 부분만 사용하므로 타임존 차이는 시간이 날짜 경계를 넘지 않는 한 영향 없음

### 3. 출력 형식

#### 3.1 유효한 경우
```typescript
{ isValid: true }
```

#### 3.2 무효한 경우 (유효성 검증 실패)
```typescript
{
  isValid: false,
  error: "시작일은 종료일보다 이전이거나 같아야 합니다"
}
```

#### 3.3 경고가 있는 유효한 경우
```typescript
{
  isValid: true,
  warning: "날짜 범위가 100년을 초과합니다"
}
```

### 4. 에러 처리

각 에러 케이스별 정확한 에러 메시지:

| 케이스 | `isValid` | `error` 메시지 |
|--------|-----------|----------------|
| `null` 또는 `undefined` 입력 | `false` | `"시작일과 종료일은 필수입니다"` |
| 빈 문자열 (`""`) | `false` | `"유효하지 않은 날짜 형식입니다"` |
| 잘못된 문자열 형식 (예: `"invalid"`, `"2024/01/01"`) | `false` | `"유효하지 않은 날짜 형식입니다"` |
| 존재하지 않는 날짜 (예: `"2024-02-30"`, `"2024-13-01"`) | `false` | `"유효하지 않은 날짜입니다"` |
| Invalid Date 객체 | `false` | `"유효하지 않은 날짜입니다"` |
| 시작일 > 종료일 | `false` | `"시작일은 종료일보다 이전이거나 같아야 합니다"` |
| 타입 불일치 (숫자, 배열, 객체 등) | `false` | `"유효하지 않은 날짜 형식입니다"` |

### 5. 엣지 케이스

#### 5.1 같은 날짜
- **입력**: `startDate === endDate`
- **출력**: `{ isValid: true }`
- **예시**: `("2024-01-01", "2024-01-01")` → 유효

#### 5.2 1일 차이
- **입력**: `endDate - startDate === 1일`
- **출력**: `{ isValid: true }`
- **예시**: `("2024-01-01", "2024-01-02")` → 유효

#### 5.3 100년 이상 차이
- **조건**: `endDate - startDate > 36,500일` (100년 × 365일)
- **출력**: `{ isValid: true, warning: "날짜 범위가 100년을 초과합니다" }`
- **예시**: `("1920-01-01", "2024-01-01")` → 유효하나 경고 포함
- **참고**: 윤년 계산은 정확하게 수행하며, 36,500일은 대략적인 기준

#### 5.4 시간 정보가 다른 같은 날짜
- **입력**: `("2024-01-01T00:00:00", "2024-01-01T23:59:59")`
- **출력**: `{ isValid: true }`
- **이유**: 날짜 부분만 비교하므로 같은 날짜로 간주

#### 5.5 연말-연초 경계
- **입력**: `("2023-12-31", "2024-01-01")`
- **출력**: `{ isValid: true }`

#### 5.6 윤년 날짜
- **입력**: `("2024-02-29", "2024-03-01")` (2024년은 윤년)
- **출력**: `{ isValid: true }`
- **입력**: `("2023-02-29", "2023-03-01")` (2023년은 평년)
- **출력**: `{ isValid: false, error: "유효하지 않은 날짜입니다" }`

### 6. 테스트 케이스 예시

```typescript
// 정상 케이스
validateDateRange("2024-01-01", "2024-12-31")
// → { isValid: true }

// 같은 날짜
validateDateRange("2024-01-01", "2024-01-01")
// → { isValid: true }

// 무효한 범위
validateDateRange("2024-12-31", "2024-01-01")
// → { isValid: false, error: "시작일은 종료일보다 이전이거나 같아야 합니다" }

// null 입력
validateDateRange(null, "2024-01-01")
// → { isValid: false, error: "시작일과 종료일은 필수입니다" }

// 잘못된 형식
validateDateRange("invalid", "2024-01-01")
// → { isValid: false, error: "유효하지 않은 날짜 형식입니다" }

// 100년 초과
validateDateRange("1900-01-01", "2024-01-01")
// → { isValid: true, warning: "날짜 범위가 100년을 초과합니다" }

// Date 객체 사용
validateDateRange(new Date("2024-01-01"), new Date("2024-12-31"))
// → { isValid: true }
```

### 7. 구현 참고사항
- 날짜 파싱 시 `new Date()`의 브라우저별 차이를 고려하여 안전한 파싱 로직 사용 권장
- ISO 8601 형식 검증을 위한 정규식 사용 권장
- 날짜 비교 시 시간을 0으로 정규화하여 비교

---

이 개선된 명세는 모호성을 제거하고, 모든 엣지 케이스를 명시하며, 테스트 가능한 구체적인 예시를 제공합니다.

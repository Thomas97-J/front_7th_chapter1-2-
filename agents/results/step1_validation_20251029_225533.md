이제 요구사항 명세를 검증하겠습니다. 구현된 코드와 테스트 코드를 확인했으므로, 명세의 품질을 평가하겠습니다.

## 검증 결과

### 명확성
- **평가: 개선 필요**
- **의견:**
  - **긍정적:** 기본 입력/출력 형식이 명확하게 정의됨
  - **문제점:**
    1. "잘못된 날짜 형식"의 구체적 범위가 불명확 (예: 빈 문자열, 숫자, 배열 등)
    2. "시작일이 종료일보다 이후인 경우"의 에러 메시지가 명세에 없음 (단순히 "에러"라고만 표기)
    3. 시간(time) 처리 방식이 명시되지 않음 (날짜만 비교 vs 시간까지 비교)
    4. 타임존 처리 방식이 불명확
    5. "ISO 8601 문자열"의 구체적 포맷 미명시 (날짜만? 시간까지? 타임존?)

### 완전성
- **평가: 개선 필요**
- **의견:**
  - **누락된 시나리오:**
    1. 두 날짜 모두 null/undefined인 경우
    2. 빈 문자열("") 입력 처리
    3. 잘못된 타입 입력 (숫자, 객체, 배열 등)
    4. Invalid Date 객체 처리 (new Date('invalid'))
    5. 시간 정보가 포함된 날짜의 비교 방식
    6. 타임존이 다른 날짜 간 비교
    7. 윤년 날짜 처리 (2월 29일)
    8. 연도 경계 날짜 (12월 31일 → 1월 1일)
    9. 정확히 100년 차이일 때의 동작
    10. 아주 오래된 날짜나 먼 미래 날짜의 한계값
  - **긍정적:** 주요 해피패스와 기본 에러 케이스는 포함됨

### 테스트 가능성
- **평가: 개선 필요**
- **의견:**
  - **긍정적:**
    1. 출력 형식이 명확하여 검증 가능
    2. 기본 동작의 검증 기준이 명확
  - **문제점:**
    1. "100년 이상 차이"의 경계값이 모호함 (100년 초과? 100년 이상?)
    2. 에러 메시지의 정확한 문구가 명시되지 않음
    3. "경고 메시지"의 정확한 내용이 불명확 ("경고 메시지"만 표기)
    4. ISO 8601 형식의 유효성 기준이 불명확
    5. 날짜 비교 시 시간 포함 여부가 테스트 결과에 영향을 줄 수 있으나 명시되지 않음

### 일관성
- **평가: 개선 필요**
- **의견:**
  - **충돌 사항:**
    1. "시작일이 종료일보다 이전이면 유효" vs "시작일과 종료일이 같으면 유효" - "이전"이 "같음"을 포함하는지 불명확
    2. 에러 처리에서 "null 또는 undefined"는 명시되었으나, 출력 형식에서 error 필드가 선택적(optional)로 보이는데, 에러 시 항상 error 필드가 있어야 하는지 불명확
    3. "100년 이상 차이: 유효 (경고 메시지)" - warning 필드가 출력 형식에 명시되지 않음

---

## 개선된 명세

# 날짜 범위 검증 함수 명세서

## 1. 기능 개요
두 날짜 간의 기간이 논리적으로 유효한지 검증하는 순수 함수입니다.
시작일이 종료일보다 이전이거나 같은 경우 유효한 범위로 간주합니다.

---

## 2. 함수 시그니처

```typescript
function validateDateRange(
  startDate: Date | string | null | undefined,
  endDate: Date | string | null | undefined
): ValidationResult

interface ValidationResult {
  isValid: boolean;
  error?: string;      // isValid가 false일 때 필수
  warning?: string;    // isValid가 true일 때 선택적
}
```

---

## 3. 입력 명세

### 3.1 허용 타입
- **Date 객체**: JavaScript Date 객체
- **문자열**: ISO 8601 형식 및 JavaScript Date 생성자가 파싱 가능한 형식
  - 허용 예시: `'2024-01-01'`, `'2024-01-01T00:00:00Z'`, `'2024-01-01T12:30:00+09:00'`
- **null**: 명시적 null 값
- **undefined**: 명시적 undefined 값

### 3.2 불허 타입
- 숫자 (예: `20240101`, timestamp)
- 객체 (Date 제외, 예: `{ year: 2024, month: 1 }`)
- 배열 (예: `[2024, 1, 1]`)
- 불린, 함수 등 기타 타입

### 3.3 날짜 비교 방식
- **밀리초 단위로 비교**: `getTime()` 메서드를 사용하여 timestamp 기반 비교
- **시간 정보 포함**: 날짜와 시간을 모두 고려하여 비교
  - 예: `2024-01-01T09:00:00` < `2024-01-01T23:59:59`
- **타임존**: 각 Date 객체의 내부 timestamp를 사용하므로 타임존 변환이 자동 처리됨

---

## 4. 출력 명세

### 4.1 성공 응답 (유효한 날짜 범위)
```typescript
{ isValid: true }
```

### 4.2 경고 응답 (유효하지만 주의 필요)
```typescript
{ 
  isValid: true,
  warning: '날짜 범위가 100년을 초과합니다'
}
```
- **발생 조건**: 날짜 차이가 100년 초과 (100 × 365.25일 > 차이)
- **경계값**: 정확히 100년 차이일 경우 경고 없음

### 4.3 에러 응답 (무효한 입력)

| 상황 | error 메시지 |
|------|-------------|
| startDate와 endDate 모두 falsy | `'시작일과 종료일은 필수입니다'` |
| startDate만 falsy (null/undefined) | `'시작일은 필수입니다'` |
| endDate만 falsy (null/undefined) | `'종료일은 필수입니다'` |
| startDate 파싱 실패 | `'시작일 형식이 올바르지 않습니다'` |
| endDate 파싱 실패 | `'종료일 형식이 올바르지 않습니다'` |
| startDate가 Invalid Date | `'시작일 형식이 올바르지 않습니다'` |
| endDate가 Invalid Date | `'종료일 형식이 올바르지 않습니다'` |
| startDate > endDate | `'시작일은 종료일보다 이전이어야 합니다'` |

---

## 5. 유효성 검증 규칙

### 5.1 유효한 경우
1. `startDate < endDate` (시작일이 종료일보다 이전)
2. `startDate === endDate` (시작일과 종료일이 동일)

### 5.2 무효한 경우
1. `startDate > endDate` (시작일이 종료일보다 이후)
2. 입력값이 null 또는 undefined
3. 파싱 불가능한 문자열 (빈 문자열 포함)
4. Invalid Date 객체
5. 허용되지 않는 타입 (숫자, 객체, 배열 등)

---

## 6. 엣지 케이스 처리

### 6.1 날짜 형식
- **빈 문자열** (`''`): 에러 - `'시작일 형식이 올바르지 않습니다'`
- **Invalid Date** (`new Date('invalid')`): 에러 - 형식 오류
- **타임존 포함 ISO 문자열**: 정상 처리 (UTC 시간으로 변환)

### 6.2 날짜 차이
- **동일 날짜**: 유효 (에러 없음)
- **1일 차이**: 유효
- **정확히 100년 차이**: 유효 (경고 없음)
- **100년 초과**: 유효 (경고 발생)

### 6.3 특수 날짜
- **윤년 날짜** (2024-02-29): 정상 처리
- **연도 경계** (2023-12-31 → 2024-01-01): 정상 처리
- **과거 날짜** (1800-01-01): 정상 처리
- **미래 날짜** (2200-12-31): 정상 처리

### 6.4 시간 정보
- **같은 날짜, 다른 시간**: 시간까지 비교하여 판단
  - `2024-01-01T09:00:00` ≤ `2024-01-01T23:59:59` → 유효

### 6.5 타입 에러
- **숫자 타입**: 에러 - `'시작일 형식이 올바르지 않습니다'`
- **객체 타입**: 에러 - `'시작일 형식이 올바르지 않습니다'`
- **배열 타입**: 에러 - `'시작일 형식이 올바르지 않습니다'`

---

## 7. 검증 가능한 테스트 시나리오

### 7.1 기본 동작
- [ ] 시작일 < 종료일 → `{ isValid: true }`
- [ ] 시작일 = 종료일 → `{ isValid: true }`
- [ ] 시작일 > 종료일 → `{ isValid: false, error: '...' }`

### 7.2 입력 형식
- [ ] Date 객체 입력 → 정상 처리
- [ ] ISO 8601 문자열 입력 → 정상 처리
- [ ] 혼합 타입 (Date + 문자열) → 정상 처리
- [ ] 타임존 포함 문자열 → 정상 처리

### 7.3 Null/Undefined 처리
- [ ] startDate가 null → 에러
- [ ] endDate가 null → 에러
- [ ] startDate가 undefined → 에러
- [ ] endDate가 undefined → 에러
- [ ] 둘 다 null/undefined → 에러

### 7.4 형식 오류
- [ ] 파싱 불가 문자열 (`'invalid-date'`) → 에러
- [ ] 빈 문자열 (`''`) → 에러
- [ ] Invalid Date 객체 → 에러
- [ ] 잘못된 날짜 (`'2024-13-45'`) → 에러

### 7.5 타입 오류
- [ ] 숫자 타입 → 에러
- [ ] 객체 타입 → 에러
- [ ] 배열 타입 → 에러

### 7.6 경계값
- [ ] 1일 차이 → 유효
- [ ] 정확히 100년 차이 → 유효 (경고 없음)
- [ ] 100년 초과 → 유효 (경고 발생)
- [ ] 연도 경계 (12/31 → 1/1) → 유효
- [ ] 윤년 날짜 (2/29) → 유효

### 7.7 시간 처리
- [ ] 같은 날짜, 다른 시간 → 시간 차이에 따라 판단
- [ ] 타임존이 다른 날짜 → UTC 기준 비교

### 7.8 극단적 날짜
- [ ] 아주 오래된 날짜 (1800년대) → 정상 처리
- [ ] 먼 미래 날짜 (2200년대) → 정상 처리

---

## 8. 비기능 요구사항

### 8.1 성능
- 단일 검증 작업은 1ms 이내 완료

### 8.2 순수 함수
- 동일 입력에 대해 항상 동일 출력
- 부작용(side effect) 없음
- 입력 객체 변경 금지

### 8.3 타입 안정성
- TypeScript strict mode 준수
- 런타임 타입 검증 포함

---

## 9. 구현 시 참고사항

1. **날짜 파싱**: JavaScript의 `new Date()` 생성자 사용
2. **유효성 검증**: `date instanceof Date && !isNaN(date.getTime())`로 Invalid Date 확인
3. **100년 계산**: `365.25 * 24 * 60 * 60 * 1000` 밀리초 사용 (윤년 고려)
4. **에러 우선순위**: null/undefined 체크 → 파싱 → 유효성 검증 → 범위 비교 순서

날짜 범위 검증 함수의 요구사항 명세를 검토하겠습니다.

## 검증 결과

### 명확성
- **평가: 개선 필요**
- **의견:**
  - ISO 8601 문자열 형식이 구체적이지 않음 (타임존 포함 여부, 날짜만 vs 날짜+시간)
  - "100년 이상 차이"의 경고 메시지가 어떤 형태로 반환되는지 불명확 (isValid는 true인데 warning 필드 추가?)
  - "잘못된 날짜 형식"의 범위가 모호함 (예: "2023-13-01", "invalid-date" 등)
  - 에러 메시지의 구체적인 내용이 명시되지 않음

### 완전성
- **평가: 개선 필요**
- **의견:**
  - 타임존 처리 방법이 누락됨 (서로 다른 타임존의 날짜 비교 시)
  - 시간 정보가 포함된 경우의 비교 방법 미명시 (날짜만 비교? 시간까지 비교?)
  - 빈 문자열 입력 케이스 누락
  - Date 객체가 Invalid Date인 경우 처리 방법 누락
  - 타입 혼합 입력 (startDate는 Date, endDate는 string) 처리 방법 미명시
  - 음수 연도, 미래 날짜 등 특수 날짜 케이스 누락

### 테스트 가능성
- **평가: 부분 통과**
- **의견:**
  - 기본 케이스들은 테스트 가능함
  - 에러 메시지 형식이 명시되지 않아 정확한 검증 어려움
  - "경고 메시지"의 반환 형태가 불명확하여 테스트 작성 곤란
  - 성공/실패 조건은 명확하나 구체적인 에러 코드나 메시지 미정의

### 일관성
- **평가: 개선 필요**
- **의견:**
  - 엣지 케이스 #5 (100년 이상 차이)가 "유효 (경고 메시지)"로 되어 있으나, 출력 형식에 경고를 담을 구조가 정의되지 않음
  - "같은 날짜"가 요구사항 1에서는 유효, 엣지 케이스 5에서 다시 언급되어 중복
  - 에러 처리에서 "잘못된 날짜 형식"과 "시작일이 종료일보다 이후"가 모두 에러인데, 에러 메시지로 구분 가능해야 함

## 개선된 명세

# 예제 기능 명세: 날짜 범위 검증 함수 (v2)

## 기능 설명
두 날짜 사이의 기간이 유효한지 검증하는 함수를 구현합니다. 시작일이 종료일 이전이거나 같으면 유효한 범위로 간주합니다.

## 함수 시그니처
```typescript
function validateDateRange(
  startDate: Date | string,
  endDate: Date | string
): ValidationResult

type ValidationResult = 
  | { isValid: true, warning?: string }
  | { isValid: false, error: string, errorCode: ErrorCode }

enum ErrorCode {
  NULL_INPUT = 'NULL_INPUT',
  UNDEFINED_INPUT = 'UNDEFINED_INPUT',
  INVALID_FORMAT = 'INVALID_FORMAT',
  INVALID_DATE = 'INVALID_DATE',
  START_AFTER_END = 'START_AFTER_END'
}
```

## 요구사항

### 1. 입력 형식
- **Date 객체**: JavaScript Date 인스턴스
- **문자열**: ISO 8601 형식
  - 날짜만: `YYYY-MM-DD` (예: "2024-01-15")
  - 날짜+시간: `YYYY-MM-DDTHH:mm:ss.sssZ` (예: "2024-01-15T09:30:00.000Z")
  - 타임존이 없는 경우 UTC로 간주
- **혼합 입력 허용**: startDate와 endDate는 서로 다른 타입 가능

### 2. 날짜 비교 규칙
- 시간 정보가 있는 경우: 밀리초 단위까지 비교
- 날짜만 있는 경우: 00:00:00.000 UTC로 간주하여 비교
- 혼합된 경우: 날짜만 있는 쪽을 해당 날짜의 00:00:00.000 UTC로 변환 후 비교

### 3. 유효성 판단 기준
- **유효 (isValid: true)**:
  - `startDate ≤ endDate`
  - 단, 두 날짜의 차이가 36,500일(100년) 이상인 경우 경고 포함
    ```typescript
    { 
      isValid: true, 
      warning: 'Date range exceeds 100 years. Please verify the dates are correct.' 
    }
    ```

- **무효 (isValid: false)**:
  - `startDate > endDate`
    ```typescript
    { 
      isValid: false, 
      error: 'Start date must be before or equal to end date',
      errorCode: ErrorCode.START_AFTER_END
    }
    ```

### 4. 에러 처리

#### 4.1 null 입력
```typescript
{ 
  isValid: false, 
  error: 'Start date and end date cannot be null',
  errorCode: ErrorCode.NULL_INPUT
}
```

#### 4.2 undefined 입력
```typescript
{ 
  isValid: false, 
  error: 'Start date and end date are required',
  errorCode: ErrorCode.UNDEFINED_INPUT
}
```

#### 4.3 빈 문자열
```typescript
{ 
  isValid: false, 
  error: 'Date string cannot be empty',
  errorCode: ErrorCode.INVALID_FORMAT
}
```

#### 4.4 잘못된 문자열 형식
ISO 8601 형식이 아닌 경우 (예: "01/15/2024", "invalid-date")
```typescript
{ 
  isValid: false, 
  error: 'Date must be in ISO 8601 format (YYYY-MM-DD or YYYY-MM-DDTHH:mm:ss.sssZ)',
  errorCode: ErrorCode.INVALID_FORMAT
}
```

#### 4.5 Invalid Date
Date 객체가 Invalid Date이거나 존재하지 않는 날짜인 경우 (예: "2024-02-30")
```typescript
{ 
  isValid: false, 
  error: 'Invalid date value provided',
  errorCode: ErrorCode.INVALID_DATE
}
```

#### 4.6 에러 우선순위
여러 에러 조건이 동시에 발생하면 다음 순서로 처리:
1. NULL_INPUT / UNDEFINED_INPUT
2. INVALID_FORMAT
3. INVALID_DATE
4. START_AFTER_END

### 5. 테스트 케이스

#### 5.1 정상 케이스
| 입력 | 예상 결과 |
|------|----------|
| startDate: "2024-01-01", endDate: "2024-12-31" | `{ isValid: true }` |
| startDate: "2024-01-01", endDate: "2024-01-01" | `{ isValid: true }` |
| startDate: "2024-01-01", endDate: "2024-01-02" | `{ isValid: true }` |
| startDate: new Date("2024-01-01"), endDate: new Date("2024-12-31") | `{ isValid: true }` |
| startDate: "2024-01-01", endDate: new Date("2024-12-31") | `{ isValid: true }` |

#### 5.2 경고 케이스
| 입력 | 예상 결과 |
|------|----------|
| startDate: "1900-01-01", endDate: "2024-01-01" | `{ isValid: true, warning: 'Date range exceeds 100 years...' }` |

#### 5.3 에러 케이스
| 입력 | 예상 에러 코드 |
|------|---------------|
| startDate: null, endDate: "2024-12-31" | `NULL_INPUT` |
| startDate: undefined, endDate: "2024-12-31" | `UNDEFINED_INPUT` |
| startDate: "", endDate: "2024-12-31" | `INVALID_FORMAT` |
| startDate: "invalid-date", endDate: "2024-12-31" | `INVALID_FORMAT` |
| startDate: "2024-02-30", endDate: "2024-12-31" | `INVALID_DATE` |
| startDate: "2024-12-31", endDate: "2024-01-01" | `START_AFTER_END` |
| startDate: new Date("invalid"), endDate: "2024-12-31" | `INVALID_DATE` |

#### 5.4 엣지 케이스
| 케이스 | 입력 | 예상 결과 |
|--------|------|----------|
| 1일 차이 | startDate: "2024-01-01T23:59:59.999Z", endDate: "2024-01-02T00:00:00.000Z" | `{ isValid: true }` |
| 밀리초 차이 | startDate: "2024-01-01T00:00:00.000Z", endDate: "2024-01-01T00:00:00.001Z" | `{ isValid: true }` |
| 같은 순간 | startDate: "2024-01-01T00:00:00.000Z", endDate: "2024-01-01T00:00:00.000Z" | `{ isValid: true }` |
| 음수 연도 | startDate: "-000001-01-01", endDate: "2024-01-01" | `{ isValid: true, warning: '...' }` |
| 먼 미래 | startDate: "2024-01-01", endDate: "9999-12-31" | `{ isValid: true, warning: '...' }` |

## 비기능 요구사항
- 성능: 1000건의 검증을 1초 이내에 처리
- 순수 함수: 부수효과 없음
- 불변성: 입력 Date 객체를 수정하지 않음

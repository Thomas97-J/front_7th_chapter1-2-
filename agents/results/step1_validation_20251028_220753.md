제시하신 명세를 검증하겠습니다.

## 검증 결과

### 명확성
- 평가: **개선 필요**
- 의견: 
  - "ISO 8601 문자열"이 정확히 어떤 형식을 의미하는지 구체적이지 않음 (예: `2025-01-15`, `2025-01-15T10:30:00Z`, `2025-01-15T10:30:00+09:00` 모두 ISO 8601)
  - "잘못된 날짜 형식"의 범위가 불명확 (예: `"invalid"`, `"2025-13-45"`, `123`, `{}` 등)
  - "경고 메시지"가 어떻게 반환되는지 명시되지 않음 (반환 타입과 충돌 가능)
  - 에러 메시지(`error: string`)의 구체적인 내용이 정의되지 않음

### 완전성
- 평가: **개선 필요**
- 의견:
  - 타임존 처리 방식이 명시되지 않음 (예: 다른 타임존의 날짜 비교 시 동작)
  - `Date` 객체가 `Invalid Date`인 경우 처리 방법 누락
  - 빈 문자열(`""`) 입력 처리 누락
  - 숫자(타임스탬프) 입력 허용 여부 미정의
  - 배열이나 객체 등 잘못된 타입 입력 시나리오 누락
  - 시작일/종료일 중 하나만 유효한 경우의 에러 메시지 구분 필요

### 테스트 가능성
- 평가: **개선 필요**
- 의견:
  - 기본적인 테스트 시나리오는 추출 가능하나, 구체적인 입출력 예시가 없음
  - "100년 이상 차이"의 경고 메시지 형식과 검증 방법이 불명확
  - 각 에러 케이스별 예상 에러 메시지가 명시되지 않아 정확한 검증 어려움
  - 날짜 비교 기준(년/월/일까지만? 시/분/초 포함?)이 불명확

### 일관성
- 평가: **개선 필요**
- 의견:
  - 반환 타입 불일치: 일반적으로 `{ isValid: true }` 또는 `{ isValid: false, error: string }`인데, 100년 이상 차이 시 "경고 메시지"는 어떻게 반환되는지 불명확
  - "에러"라는 용어가 예외(exception) 발생과 에러 객체 반환 중 어느 것을 의미하는지 모호
  - "같은 날짜"가 밀리초 단위까지 같아야 하는지, 날짜만 같으면 되는지 불명확

## 개선된 명세

# 예제 기능 명세: 날짜 범위 검증 함수

## 기능 설명
두 날짜 사이의 기간이 유효한지 검증하는 함수 `validateDateRange`를 구현합니다.

## 함수 시그니처
```typescript
function validateDateRange(
  startDate: Date | string,
  endDate: Date | string
): ValidationResult

interface ValidationResult {
  isValid: boolean;
  error?: string;
  warning?: string;
}
```

## 요구사항

### 1. 입력 형식
- **허용되는 타입**:
  - `Date` 객체 (유효한 날짜만)
  - 문자열: ISO 8601 형식 (`YYYY-MM-DD`, `YYYY-MM-DDTHH:mm:ss.sssZ`, `YYYY-MM-DDTHH:mm:ss±hh:mm`)
  
- **거부되는 타입**:
  - `null`, `undefined`
  - 숫자 (타임스탬프)
  - 배열, 객체 (Date 제외)
  - 빈 문자열 (`""`)
  - 유효하지 않은 날짜 문자열 (예: `"invalid"`, `"2025-13-01"`, `"2025-01-32"`)
  - `Invalid Date` 객체

### 2. 검증 로직
- **날짜 비교 기준**: 밀리초 단위 타임스탬프로 비교
- **타임존 처리**: 
  - 문자열이 타임존 정보를 포함하지 않으면 로컬 타임존으로 해석
  - 타임존이 다른 날짜도 UTC 기준으로 비교
  
- **유효성 판단**:
  - ✅ 유효: `startDate <= endDate` (같은 날짜 포함)
  - ❌ 무효: `startDate > endDate`

### 3. 반환 값

#### 3.1 성공 케이스
```typescript
// 정상적인 날짜 범위
{ isValid: true }

// 100년 이상 차이 (36525일 이상)
{ isValid: true, warning: "Date range exceeds 100 years" }
```

#### 3.2 실패 케이스 - 입력 오류
```typescript
// startDate가 null 또는 undefined
{ isValid: false, error: "startDate is required" }

// endDate가 null 또는 undefined
{ isValid: false, error: "endDate is required" }

// startDate가 잘못된 타입 (숫자, 배열, 객체 등)
{ isValid: false, error: "startDate must be a Date object or ISO 8601 string" }

// endDate가 잘못된 타입
{ isValid: false, error: "endDate must be a Date object or ISO 8601 string" }

// startDate가 잘못된 날짜 형식
{ isValid: false, error: "startDate is not a valid date" }

// endDate가 잘못된 날짜 형식
{ isValid: false, error: "endDate is not a valid date" }
```

#### 3.3 실패 케이스 - 검증 오류
```typescript
// 시작일이 종료일보다 이후
{ isValid: false, error: "startDate must be before or equal to endDate" }
```

### 4. 테스트 시나리오

#### 4.1 정상 동작
| 시나리오 | startDate | endDate | 예상 결과 |
|---------|-----------|---------|----------|
| 같은 날짜 | `2025-01-15` | `2025-01-15` | `{ isValid: true }` |
| 1일 차이 | `2025-01-15` | `2025-01-16` | `{ isValid: true }` |
| Date 객체 | `new Date('2025-01-15')` | `new Date('2025-12-31')` | `{ isValid: true }` |
| 타임존 포함 | `2025-01-15T00:00:00+09:00` | `2025-01-15T00:00:00Z` | `{ isValid: true }` (UTC 기준 9시간 차이) |

#### 4.2 경고 케이스
| 시나리오 | startDate | endDate | 예상 결과 |
|---------|-----------|---------|----------|
| 정확히 100년 | `1925-01-01` | `2025-01-01` | `{ isValid: true, warning: "Date range exceeds 100 years" }` |
| 100년 초과 | `1900-01-01` | `2025-01-01` | `{ isValid: true, warning: "Date range exceeds 100 years" }` |

#### 4.3 에러 케이스
| 시나리오 | startDate | endDate | 예상 에러 메시지 |
|---------|-----------|---------|----------------|
| null 입력 | `null` | `2025-01-15` | `"startDate is required"` |
| undefined 입력 | `2025-01-15` | `undefined` | `"endDate is required"` |
| 숫자 입력 | `1642291200000` | `2025-01-15` | `"startDate must be a Date object or ISO 8601 string"` |
| 빈 문자열 | `""` | `2025-01-15` | `"startDate is not a valid date"` |
| 잘못된 형식 | `"invalid"` | `2025-01-15` | `"startDate is not a valid date"` |
| 잘못된 날짜 | `"2025-13-01"` | `2025-01-15` | `"startDate is not a valid date"` |
| Invalid Date 객체 | `new Date("invalid")` | `2025-01-15` | `"startDate is not a valid date"` |
| 역순 날짜 | `2025-12-31` | `2025-01-01` | `"startDate must be before or equal to endDate"` |

### 5. 구현 제약사항
- 함수는 예외를 던지지 않고 항상 `ValidationResult` 객체를 반환해야 함
- 입력값을 변경(mutate)하지 않아야 함
- 외부 라이브러리 사용 최소화 (네이티브 `Date` API 우선 사용)

### 6. 성능 요구사항
- 단일 호출 응답 시간: 10ms 이하
- 메모리 사용: 최소화 (불필요한 Date 객체 생성 자제)

---

이 개선된 명세는 모호성을 제거하고 구체적인 예시를 제공하여 테스트 작성과 구현이 명확하게 가능하도록 작성되었습니다.
